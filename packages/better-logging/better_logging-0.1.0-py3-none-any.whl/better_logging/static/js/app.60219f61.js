(function(e){function t(t){for(var a,l,s=t[0],i=t[1],c=t[2],u=0,p=[];u<s.length;u++)l=s[u],Object.prototype.hasOwnProperty.call(r,l)&&r[l]&&p.push(r[l][0]),r[l]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);d&&d(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,l=1;l<n.length;l++){var i=n[l];0!==r[i]&&(a=!1)}a&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},r={app:0},o=[];function l(e){return s.p+"js/"+({}[e]||e)+"."+{"chunk-2d0de531":"2ee88cf0"}[e]+".js"}function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise((function(t,a){n=r[e]=[t,a]}));t.push(n[2]=a);var o,i=document.createElement("script");i.charset="utf-8",i.timeout=120,s.nc&&i.setAttribute("nonce",s.nc),i.src=l(e);var c=new Error;o=function(t){i.onerror=i.onload=null,clearTimeout(u);var n=r[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+a+": "+o+")",c.name="ChunkLoadError",c.type=a,c.request=o,n[1](c)}r[e]=void 0}};var u=setTimeout((function(){o({type:"timeout",target:i})}),12e4);i.onerror=i.onload=o,document.head.appendChild(i)}return Promise.all(t)},s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var d=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("a4d3"),n("e01a"),n("d28b"),n("a434"),n("d3b7"),n("3ca3"),n("ddb0");var a=n("d4ec"),r=n("bee2"),o=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("2b0e")),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[n("div",{staticClass:"d-flex align-center"},[n("v-img",{staticClass:"shrink mr-2",attrs:{alt:"Vuetify Logo",contain:"",src:"vuetify-logo-dark.png",transition:"scale-transition",width:"40"}})],1),n("v-toolbar-title",[e._v("Better Logging")]),n("v-progress-circular",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"ml-4",attrs:{indeterminate:e.loading,size:36,width:4}}),n("v-spacer")],1),n("v-content",[n("v-row",{attrs:{justify:"space-around"}},[n("v-col",{attrs:{cols:"10"}},[n("router-view")],1)],1)],1)],1)},s=[],i={name:"App",data:function(){return{loading:!1}},mounted:function(){var e=this;this.store.listenLoading((function(t){e.loading=t}))}},c=i,u=n("2877"),d=n("6544"),p=n.n(d),v=n("7496"),f=n("40dc"),h=n("62ad"),m=n("a75b"),g=n("adda"),b=n("490a"),y=n("0fd9"),x=n("2fa4"),k=n("2a7f"),_=Object(u["a"])(c,l,s,!1,null,null,null),w=_.exports;p()(_,{VApp:v["a"],VAppBar:f["a"],VCol:h["a"],VContent:m["a"],VImg:g["a"],VProgressCircular:b["a"],VRow:y["a"],VSpacer:x["a"],VToolbarTitle:k["a"]});var C=n("8c4f"),M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("SearchForm"),n("Table")],1)},T=[],O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-container",{attrs:{fluid:""}},[n("v-row",[n("v-col",{staticClass:"pt-0 pb-0",attrs:{cols:"12",lg:"12"}},[n("v-text-field",{attrs:{"single-line":"",label:"Search","append-icon":"search"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}})],1)],1),n("v-row",{attrs:{justify:"end"}},[n("v-col",{staticClass:"pt-0 pb-0",attrs:{cols:"12",lg:"4"}},[n("v-select",{ref:"levels",attrs:{items:e.allLevels,label:"Levels",multiple:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.selectedLevels,callback:function(t){e.selectedLevels=t},expression:"selectedLevels"}})],1),n("v-col",{staticClass:"pt-0 pb-0",attrs:{cols:"12",lg:"4"}},[n("v-select",{ref:"modules",attrs:{items:e.allModules,label:"Modules",multiple:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},scopedSlots:e._u([{key:"prepend-item",fn:function(){return[n("v-list-item",{attrs:{ripple:""},on:{click:e.modulesToggle}},[n("v-list-item-action",[n("v-icon",{attrs:{color:e.selectedModules.length>0?"indigo darken-4":""}},[e._v(" "+e._s(e.modulesToggleIcon)+" ")])],1),n("v-list-item-content",[n("v-list-item-title",[e._v("Select All")])],1)],1),n("v-divider",{staticClass:"mt-2"})]},proxy:!0},{key:"selection",fn:function(t){var a=t.item,r=t.index;return[0==r?n("div",{staticClass:"v-select__selection v-select__selection--comma"},[e._v(" "+e._s(a)+" ")]):e._e(),0==r?n("div",{staticClass:"grey--text caption"},[e._v(" (+"+e._s(e.selectedModules.length-1)+" others) ")]):e._e()]}}]),model:{value:e.selectedModules,callback:function(t){e.selectedModules=t},expression:"selectedModules"}})],1),n("v-col",{staticClass:"pt-0 pb-0",attrs:{cols:"12",lg:"4"}},[n("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[n("v-text-field",e._g({attrs:{label:"Date range","prepend-icon":"event",hint:"YYYY-MM-DD","persistent-hint":""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.periodText,callback:function(t){e.periodText=t},expression:"periodText"}},a))]}}]),model:{value:e.datePickerMenu,callback:function(t){e.datePickerMenu=t},expression:"datePickerMenu"}},[n("v-date-picker",{attrs:{range:"","no-title":"",scrollable:""},model:{value:e.period,callback:function(t){e.period=t},expression:"period"}},[n("v-spacer"),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.datePickerMenu=!1}}},[e._v("Cancel")]),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu.save(e.period)}}},[e._v("OK")])],1)],1)],1)],1)],1)],1)},S=[],V=(n("99af"),n("a15b"),n("fb6a"),n("ac1f"),n("841c"),n("1276"),n("96cf"),n("1da1")),L={name:"SearchForm",data:function(){return{valid:!1,datePickerMenu:!1,loading:!1,searchValue:"",searchRule:[],selectedLevels:["ERROR","WARN","INFO","DEBUG"],allLevels:["ERROR","WARN","INFO","DEBUG","TRACE"],selectedModules:[],allModules:[],period:this.defaultPeriod()}},computed:{periodText:function(){return this.period.sort().join(" ~ ")},modulesToggleIcon:function(){return this.selectedModules.length===this.allModules.length?"mdi-close-box":this.selectedModules.length>0?"mdi-minus-box":"mdi-checkbox-blank-outline"}},mounted:function(){var e=this;this.retrieveModules().then((function(t){e.search()}))},methods:{defaultPeriod:function(){return[(new Date).toISOString().substr(0,10)]},retrieveModules:function(){var e=this;return fetch("api/modules").then((function(e){return e.json()})).then((function(t){e.allModules=t,e.selectedModules=t}))},modulesToggle:function(){var e=this;this.$nextTick((function(){e.selectedModules.length===e.allModules.length?e.selectedModules=[]:e.selectedModules=e.allModules.slice()}))},search:function(){var e=this;return Object(V["a"])(regeneratorRuntime.mark((function t(){var n,a,r,o,l,s,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e,a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({levels:e.selectedLevels,datetime:e.period,modules:e.selectedModules,query:e.searchValue})},n.store.changeLoading(!0),n.store.clearEvents(),r=new TransformStream(new E),t.next=7,fetch("api/search",a);case 7:o=t.sent,l=o.body.pipeThrough(r).getReader();case 9:return t.next=12,l.read();case 12:if(s=t.sent,i=s.done,c=s.value,!i){t.next=17;break}return t.abrupt("break",20);case 17:n.store.appendEvents(JSON.parse(c)),t.next=9;break;case 20:n.store.changeLoading(!1);case 21:case"end":return t.stop()}}),t)})))()}}},E=function(){function e(){Object(a["a"])(this,e),this.decoder=new TextDecoder,this.lastString=""}return Object(r["a"])(e,[{key:"transform",value:function(e,t){var n="".concat(this.lastString).concat(this.decoder.decode(e)),a=n.split(/\n/g);this.lastString=a.pop()||"";var r=!0,o=!1,l=void 0;try{for(var s,i=a[Symbol.iterator]();!(r=(s=i.next()).done);r=!0){var c=s.value;t.enqueue(c)}}catch(u){o=!0,l=u}finally{try{r||null==i.return||i.return()}finally{if(o)throw l}}}},{key:"flush",value:function(e){this.lastString&&e.enqueue(this.lastString)}}]),e}(),j=L,P=n("8336"),A=n("a523"),R=n("2e4b"),$=n("ce7e"),B=n("4bd4"),I=n("132d"),D=n("da13"),F=n("1800"),N=n("5d23"),q=n("e449"),J=n("b974"),Y=n("8654"),G=Object(u["a"])(j,O,S,!1,null,null,null),H=G.exports;p()(G,{VBtn:P["a"],VCol:h["a"],VContainer:A["a"],VDatePicker:R["a"],VDivider:$["a"],VForm:B["a"],VIcon:I["a"],VListItem:D["a"],VListItemAction:F["a"],VListItemContent:N["a"],VListItemTitle:N["b"],VMenu:q["a"],VRow:y["a"],VSelect:J["a"],VSpacer:x["a"],VTextField:Y["a"]});var U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("p",{staticClass:"caption text--secondary ml-4"},[e._v("Found "+e._s(e.count)+" events")]),n("div",{staticClass:"v-data-table event-table elevation-1 v-data-table--dense theme--light"},[n("div",{staticClass:"v-data-table__wrapper"},[n("table",[n("colgroup",[n("col",{}),n("col",{}),n("col",{}),n("col",{}),n("col",{})]),n("thead",{staticClass:"v-data-table-header"},[n("tr",[n("th",{staticClass:"text-start",staticStyle:{width:"64px","min-width":"64px"},attrs:{role:"columnheader",scope:"col","aria-label":"App","aria-sort":"none"}},[n("span",[e._v("App")])]),n("th",{staticClass:"text-start",staticStyle:{width:"196px","min-width":"196px"},attrs:{role:"columnheader",scope:"col","aria-label":"Datetime","aria-sort":"none"}},[n("span",[e._v("Datetime")])]),n("th",{staticClass:"text-start",staticStyle:{width:"48px","min-width":"48px"},attrs:{role:"columnheader",scope:"col","aria-label":"Level","aria-sort":"none"}},[n("span",[e._v("Level")])]),n("th",{staticClass:"text-start",staticStyle:{width:"32px","min-width":"32px"},attrs:{role:"columnheader",scope:"col","aria-label":"Logger","aria-sort":"none"}},[n("span",[e._v("Logger")])]),n("th",{staticClass:"text-start",attrs:{role:"columnheader",scope:"col","aria-label":"Message","aria-sort":"none"}},[n("span",[e._v("Message")])])])]),n("tbody",{attrs:{id:"events"}})])])])])},W=[],z={data:function(){return{headers:[{text:"App",value:"app",width:64},{text:"Datetime",value:"datetime",width:196},{text:"Level",value:"level",width:48},{text:"Logger",value:"logger_name",width:32},{text:"Message",value:"message"},{text:"",value:"data-table-expand",width:32}],count:0}},methods:{createTr:function(e){var t=document.createElement("tr");return t.appendChild(this.createTd(e.app)),t.appendChild(this.createTd(e.datetime)),t.appendChild(this.createTd(e.level)),t.appendChild(this.createTd(e.logger_name)),t.appendChild(this.createTd(e.message)),t},createTd:function(e){var t=document.createElement("td");return t.setAttribute("class","text-start"),t.appendChild(document.createTextNode(e)),t}},mounted:function(){var e=this,t=document.getElementById("events");this.store.listenClearEvents((function(){t.innerHTML="",e.count=0})),this.store.listenAppendEvents((function(n){if(Array.isArray(n)){e.count+=n.length;var a=!0,r=!1,o=void 0;try{for(var l,s=n[Symbol.iterator]();!(a=(l=s.next()).done);a=!0){var i=l.value;t.appendChild(e.createTr(i))}}catch(c){r=!0,o=c}finally{try{a||null==s.return||s.return()}finally{if(r)throw o}}}else e.count+=1,t.appendChild(e.createTr(n))}))}},K=z,Q=(n("76a5"),Object(u["a"])(K,U,W,!1,null,null,null)),X=Q.exports;p()(Q,{VContainer:A["a"]});var Z={name:"Home",components:{SearchForm:H,Table:X},data:function(){return{}}},ee=Z,te=Object(u["a"])(ee,M,T,!1,null,null,null),ne=te.exports,ae=n("f309");o["a"].config.productionTip=!1,o["a"].config.devtools=!0,o["a"].config.performance=!0,o["a"].use(C["a"]),o["a"].use(ae["a"]);var re=function(){function e(){Object(a["a"])(this,e),this.store={}}return Object(r["a"])(e,[{key:"buffer_factory",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,a=[];return function(r){a.push(r),a.length>=t&&(console.log("Flush count "+a.length),e(a.splice(0))),setInterval((function(){a.length>0&&(console.log("Flush time "+a.length),e(a.splice(0)))}),n)}}},{key:"$on",value:function(e,t){this.store[e]?this.store[e].push(t):this.store[e]=[t]}},{key:"$emit",value:function(e,t){var n=this.store[e];if(n){var a=!0,r=!1,o=void 0;try{for(var l,s=n[Symbol.iterator]();!(a=(l=s.next()).done);a=!0){var i=l.value;i(t)}}catch(c){r=!0,o=c}finally{try{a||null==s.return||s.return()}finally{if(r)throw o}}}}}]),e}(),oe={eventBus:new re,changeLoading:function(e){this.eventBus.$emit("change_loading",e)},listenLoading:function(e){return this.eventBus.$on("change_loading",e)},clearEvents:function(){this.eventBus.$emit("clear_events")},appendEvents:function(e){this.eventBus.$emit("append_events",e)},listenClearEvents:function(e){return this.eventBus.$on("clear_events",e)},listenAppendEvents:function(e){return this.eventBus.$on("append_events",e)}};o["a"].prototype.store=oe;var le=[{path:"/",name:"home",component:ne},{path:"/about",name:"about",component:function(){return n.e("chunk-2d0de531").then(n.bind(null,"84ba"))}}],se=new C["a"]({routes:le}),ie=new ae["a"]({});new o["a"]({router:se,vuetify:ie,render:function(e){return e(w)}}).$mount("#app")},"76a5":function(e,t,n){"use strict";var a=n("cf69"),r=n.n(a);r.a},cf69:function(e,t,n){}});
//# sourceMappingURL=app.60219f61.js.map