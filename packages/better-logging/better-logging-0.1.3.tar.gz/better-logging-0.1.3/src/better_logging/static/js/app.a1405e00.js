(function(e){function t(t){for(var r,i,l=t[0],s=t[1],c=t[2],u=0,p=[];u<l.length;u++)i=l[u],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);d&&d(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,i=1;i<n.length;i++){var s=n[i];0!==a[s]&&(r=!1)}r&&(o.splice(t--,1),e=l(l.s=n[0]))}return e}var r={},a={app:0},o=[];function i(e){return l.p+"js/"+({}[e]||e)+"."+{"chunk-2d0de531":"2ee88cf0"}[e]+".js"}function l(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n=a[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,r){n=a[e]=[t,r]}));t.push(n[2]=r);var o,s=document.createElement("script");s.charset="utf-8",s.timeout=120,l.nc&&s.setAttribute("nonce",l.nc),s.src=i(e);var c=new Error;o=function(t){s.onerror=s.onload=null,clearTimeout(u);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",c.name="ChunkLoadError",c.type=r,c.request=o,n[1](c)}a[e]=void 0}};var u=setTimeout((function(){o({type:"timeout",target:s})}),12e4);s.onerror=s.onload=o,document.head.appendChild(s)}return Promise.all(t)},l.m=e,l.c=r,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)l.d(n,r,function(t){return e[t]}.bind(null,r));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/",l.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var d=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("a4d3"),n("e01a"),n("d28b"),n("a434"),n("d3b7"),n("3ca3"),n("ddb0");var r=n("d4ec"),a=n("bee2"),o=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("2b0e")),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[n("div",{staticClass:"d-flex align-center"},[n("v-img",{staticClass:"shrink mr-2",attrs:{alt:"Vuetify Logo",contain:"",src:"vuetify-logo-dark.png",transition:"scale-transition",width:"40"}})],1),n("v-toolbar-title",[e._v("Better Logging")]),n("v-progress-circular",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"ml-4",attrs:{indeterminate:e.loading,size:36,width:4}}),n("v-spacer")],1),n("v-content",[n("v-row",{attrs:{justify:"space-around"}},[n("v-col",{attrs:{cols:"10"}},[n("router-view")],1)],1)],1)],1)},l=[],s={name:"App",data:function(){return{loading:!1}},mounted:function(){var e=this;this.store.listenLoading((function(t){e.loading=t}))}},c=s,u=n("2877"),d=n("6544"),p=n.n(d),v=n("7496"),f=n("40dc"),h=n("62ad"),m=n("a75b"),g=n("adda"),b=n("490a"),y=n("0fd9"),k=n("2fa4"),x=n("2a7f"),_=Object(u["a"])(c,i,l,!1,null,null,null),w=_.exports;p()(_,{VApp:v["a"],VAppBar:f["a"],VCol:h["a"],VContent:m["a"],VImg:g["a"],VProgressCircular:b["a"],VRow:y["a"],VSpacer:k["a"],VToolbarTitle:x["a"]});var T=n("8c4f"),C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("SearchForm"),n("Table")],1)},M=[],O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-container",{attrs:{fluid:""}},[n("v-row",[n("v-col",{staticClass:"pt-0 pb-0",attrs:{cols:"12",lg:"12"}},[n("v-text-field",{attrs:{"single-line":"",label:"Search","append-icon":"search"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}})],1)],1),n("v-row",{attrs:{justify:"end"}},[n("v-col",{staticClass:"pt-0 pb-0",attrs:{cols:"12",lg:"4"}},[n("v-select",{ref:"levels",attrs:{items:e.allLevels,label:"Levels",multiple:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.selectedLevels,callback:function(t){e.selectedLevels=t},expression:"selectedLevels"}})],1),n("v-col",{staticClass:"pt-0 pb-0",attrs:{cols:"12",lg:"4"}},[n("v-select",{ref:"modules",attrs:{items:e.allModules,label:"Modules",multiple:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},scopedSlots:e._u([{key:"prepend-item",fn:function(){return[n("v-list-item",{attrs:{ripple:""},on:{click:e.modulesToggle}},[n("v-list-item-action",[n("v-icon",{attrs:{color:e.selectedModules.length>0?"indigo darken-4":""}},[e._v(" "+e._s(e.modulesToggleIcon)+" ")])],1),n("v-list-item-content",[n("v-list-item-title",[e._v("Select All")])],1)],1),n("v-divider",{staticClass:"mt-2"})]},proxy:!0},{key:"selection",fn:function(t){var r=t.item,a=t.index;return[0==a?n("div",{staticClass:"v-select__selection v-select__selection--comma"},[e._v(" "+e._s(r)+" ")]):e._e(),0==a?n("div",{staticClass:"grey--text caption"},[e._v(" (+"+e._s(e.selectedModules.length-1)+" others) ")]):e._e()]}}]),model:{value:e.selectedModules,callback:function(t){e.selectedModules=t},expression:"selectedModules"}})],1),n("v-col",{staticClass:"pt-0 pb-0",attrs:{cols:"12",lg:"4"}},[n("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-text-field",e._g({attrs:{label:"Date range","prepend-icon":"event",hint:"YYYY-MM-DD","persistent-hint":""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.periodText,callback:function(t){e.periodText=t},expression:"periodText"}},r))]}}]),model:{value:e.datePickerMenu,callback:function(t){e.datePickerMenu=t},expression:"datePickerMenu"}},[n("v-date-picker",{attrs:{range:"","no-title":"",scrollable:""},model:{value:e.period,callback:function(t){e.period=t},expression:"period"}},[n("v-spacer"),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.datePickerMenu=!1}}},[e._v("Cancel")]),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu.save(e.period)}}},[e._v("OK")])],1)],1)],1)],1)],1)],1)},V=[],S=(n("99af"),n("a15b"),n("fb6a"),n("ac1f"),n("841c"),n("1276"),n("96cf"),n("1da1")),E={name:"SearchForm",data:function(){return{valid:!1,datePickerMenu:!1,loading:!1,searchValue:"",searchRule:[],selectedLevels:["ERROR","WARN","INFO","DEBUG"],allLevels:["ERROR","WARN","INFO","DEBUG","TRACE"],selectedModules:[],allModules:[],period:this.defaultPeriod()}},computed:{periodText:function(){return this.period.sort().join(" ~ ")},modulesToggleIcon:function(){return this.selectedModules.length===this.allModules.length?"mdi-close-box":this.selectedModules.length>0?"mdi-minus-box":"mdi-checkbox-blank-outline"}},mounted:function(){var e=this;this.retrieveModules().then((function(t){e.search()}))},methods:{defaultPeriod:function(){return[(new Date).toISOString().substr(0,10)]},retrieveModules:function(){var e=this;return fetch("api/modules").then((function(e){return e.json()})).then((function(t){e.allModules=t,e.selectedModules=t}))},modulesToggle:function(){var e=this;this.$nextTick((function(){e.selectedModules.length===e.allModules.length?e.selectedModules=[]:e.selectedModules=e.allModules.slice()}))},search:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o,i,l,s,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e,r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({levels:e.selectedLevels,datetime:e.period,modules:e.selectedModules,query:e.searchValue})},n.store.changeLoading(!0),n.store.clearEvents(),a=new TransformStream(new j),t.next=7,fetch("api/search",r);case 7:o=t.sent,i=o.body.pipeThrough(a).getReader();case 9:return t.next=12,i.read();case 12:if(l=t.sent,s=l.done,c=l.value,!s){t.next=17;break}return t.abrupt("break",20);case 17:n.store.appendEvents(JSON.parse(c)),t.next=9;break;case 20:n.store.changeLoading(!1);case 21:case"end":return t.stop()}}),t)})))()}}},j=function(){function e(){Object(r["a"])(this,e),this.decoder=new TextDecoder,this.lastString=""}return Object(a["a"])(e,[{key:"transform",value:function(e,t){var n="".concat(this.lastString).concat(this.decoder.decode(e)),r=n.split(/\n/g);this.lastString=r.pop()||"";var a=!0,o=!1,i=void 0;try{for(var l,s=r[Symbol.iterator]();!(a=(l=s.next()).done);a=!0){var c=l.value;t.enqueue(c)}}catch(u){o=!0,i=u}finally{try{a||null==s.return||s.return()}finally{if(o)throw i}}}},{key:"flush",value:function(e){this.lastString&&e.enqueue(this.lastString)}}]),e}(),L=E,P=n("8336"),A=n("a523"),R=n("2e4b"),$=n("ce7e"),B=n("4bd4"),I=n("132d"),D=n("da13"),F=n("1800"),N=n("5d23"),q=n("e449"),J=n("b974"),Y=n("8654"),G=Object(u["a"])(L,O,V,!1,null,null,null),H=G.exports;p()(G,{VBtn:P["a"],VCol:h["a"],VContainer:A["a"],VDatePicker:R["a"],VDivider:$["a"],VForm:B["a"],VIcon:I["a"],VListItem:D["a"],VListItemAction:F["a"],VListItemContent:N["a"],VListItemTitle:N["b"],VMenu:q["a"],VRow:y["a"],VSelect:J["a"],VSpacer:k["a"],VTextField:Y["a"]});var U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("p",{staticClass:"caption text--secondary ml-4"},[e._v("Found "+e._s(e.count)+" events")]),n("v-data-table",{staticClass:"event-table elevation-1",attrs:{headers:e.headers,items:[],"disable-pagination":!0,"disable-sort":!0,"hide-default-footer":!0,dense:!0,"item-key":"id"}})],1)},W=[],z={data:function(){return{headers:[{text:"App",value:"app",width:64},{text:"Datetime",value:"datetime",width:200},{text:"Level",value:"level",width:48},{text:"Logger",value:"logger_name",width:48},{text:"Trace",value:"trace_id",width:300},{text:"Message",value:"message"}],count:0}},methods:{createTr:function(e){var t=document.createElement("tr");return t.appendChild(this.createTd(e.app)),t.appendChild(this.createTd(e.datetime)),t.appendChild(this.createTd(e.level)),t.appendChild(this.createTd(e.logger_name)),t.appendChild(this.createTd(e.trace_id)),t.appendChild(this.createTd(e.message)),t},createTd:function(e){var t=document.createElement("td");return t.setAttribute("class","text-start"),t.appendChild(document.createTextNode(e)),t}},mounted:function(){var e=this,t=document.querySelector(".event-table tbody");this.store.listenClearEvents((function(){t.innerHTML="",e.count=0})),this.store.listenAppendEvents((function(n){if(Array.isArray(n)){e.count+=n.length;var r=!0,a=!1,o=void 0;try{for(var i,l=n[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var s=i.value;t.appendChild(e.createTr(s))}}catch(c){a=!0,o=c}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}}else e.count+=1,t.appendChild(e.createTr(n))}))}},K=z,Q=(n("76a5"),n("8fea")),X=Object(u["a"])(K,U,W,!1,null,null,null),Z=X.exports;p()(X,{VContainer:A["a"],VDataTable:Q["a"]});var ee={name:"Home",components:{SearchForm:H,Table:Z},data:function(){return{}}},te=ee,ne=Object(u["a"])(te,C,M,!1,null,null,null),re=ne.exports,ae=n("f309");o["a"].config.productionTip=!1,o["a"].config.devtools=!0,o["a"].config.performance=!0,o["a"].use(T["a"]),o["a"].use(ae["a"]);var oe=function(){function e(){Object(r["a"])(this,e),this.store={}}return Object(a["a"])(e,[{key:"buffer_factory",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=[];return function(a){r.push(a),r.length>=t&&(console.log("Flush count "+r.length),e(r.splice(0))),setInterval((function(){r.length>0&&(console.log("Flush time "+r.length),e(r.splice(0)))}),n)}}},{key:"$on",value:function(e,t){this.store[e]?this.store[e].push(t):this.store[e]=[t]}},{key:"$emit",value:function(e,t){var n=this.store[e];if(n){var r=!0,a=!1,o=void 0;try{for(var i,l=n[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var s=i.value;s(t)}}catch(c){a=!0,o=c}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}}}}]),e}(),ie={eventBus:new oe,changeLoading:function(e){this.eventBus.$emit("change_loading",e)},listenLoading:function(e){return this.eventBus.$on("change_loading",e)},clearEvents:function(){this.eventBus.$emit("clear_events")},appendEvents:function(e){this.eventBus.$emit("append_events",e)},listenClearEvents:function(e){return this.eventBus.$on("clear_events",e)},listenAppendEvents:function(e){return this.eventBus.$on("append_events",e)}};o["a"].prototype.store=ie;var le=[{path:"/",name:"home",component:re},{path:"/about",name:"about",component:function(){return n.e("chunk-2d0de531").then(n.bind(null,"84ba"))}}],se=new T["a"]({routes:le}),ce=new ae["a"]({});new o["a"]({router:se,vuetify:ce,render:function(e){return e(w)}}).$mount("#app")},"76a5":function(e,t,n){"use strict";var r=n("cf69"),a=n.n(r);a.a},cf69:function(e,t,n){}});
//# sourceMappingURL=app.a1405e00.js.map