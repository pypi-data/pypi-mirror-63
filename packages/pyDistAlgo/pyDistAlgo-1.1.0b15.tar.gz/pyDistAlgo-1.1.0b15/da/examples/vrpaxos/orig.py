# -*- generated by 1.0.14 -*-
import da
PatternExpr_385 = da.pat.TuplePattern([da.pat.ConstantPattern('done')])
PatternExpr_405 = da.pat.TuplePattern([da.pat.ConstantPattern('request'), da.pat.FreePattern('p')])
PatternExpr_422 = da.pat.TuplePattern([da.pat.ConstantPattern('decision'), da.pat.FreePattern('s'), da.pat.FreePattern('p')])
PatternExpr_390 = da.pat.TuplePattern([da.pat.FreePattern(None), da.pat.TuplePattern([da.pat.FreePattern(None), da.pat.FreePattern(None), da.pat.FreePattern(None)]), da.pat.TuplePattern([da.pat.ConstantPattern('done')])])
PatternExpr_502 = da.pat.TuplePattern([da.pat.ConstantPattern('done')])
PatternExpr_522 = da.pat.FreePattern('m')
PatternExpr_540 = da.pat.TuplePattern([da.pat.ConstantPattern('p1a'), da.pat.FreePattern(None), da.pat.FreePattern('b')])
PatternExpr_564 = da.pat.TuplePattern([da.pat.ConstantPattern('p2a'), da.pat.FreePattern(None), da.pat.FreePattern('b'), da.pat.FreePattern(None), da.pat.FreePattern(None)])
PatternExpr_595 = da.pat.TuplePattern([da.pat.ConstantPattern('p1a'), da.pat.FreePattern('leader_scout'), da.pat.FreePattern('b')])
PatternExpr_619 = da.pat.TuplePattern([da.pat.ConstantPattern('p2a'), da.pat.FreePattern('leader_commander'), da.pat.FreePattern('b'), da.pat.FreePattern('s'), da.pat.FreePattern('p')])
PatternExpr_507 = da.pat.TuplePattern([da.pat.FreePattern(None), da.pat.TuplePattern([da.pat.FreePattern(None), da.pat.FreePattern(None), da.pat.FreePattern(None)]), da.pat.TuplePattern([da.pat.ConstantPattern('done')])])
PatternExpr_695 = da.pat.TuplePattern([da.pat.ConstantPattern('p2b'), da.pat.FreePattern('a'), da.pat.BoundPattern('_BoundPattern700_')])
PatternExpr_731 = da.pat.TuplePattern([da.pat.ConstantPattern('p2b'), da.pat.FreePattern(None), da.pat.FreePattern('b1')])
PatternExpr_805 = da.pat.TuplePattern([da.pat.ConstantPattern('p1b'), da.pat.FreePattern('a'), da.pat.BoundPattern('_BoundPattern810_'), da.pat.FreePattern(None)])
PatternExpr_837 = da.pat.TuplePattern([da.pat.ConstantPattern('p1b'), da.pat.FreePattern(None), da.pat.BoundPattern('_BoundPattern841_'), da.pat.FreePattern('r')])
PatternExpr_876 = da.pat.TuplePattern([da.pat.ConstantPattern('p1b'), da.pat.FreePattern('a'), da.pat.FreePattern('b1'), da.pat.FreePattern(None)])
PatternExpr_967 = da.pat.TuplePattern([da.pat.ConstantPattern('done')])
PatternExpr_987 = da.pat.TuplePattern([da.pat.ConstantPattern('propose'), da.pat.FreePattern('s'), da.pat.FreePattern('p')])
PatternExpr_1039 = da.pat.TuplePattern([da.pat.ConstantPattern('adopted'), da.pat.FreePattern('ballot_num'), da.pat.FreePattern('pvals')])
PatternExpr_1091 = da.pat.TuplePattern([da.pat.ConstantPattern('preempted'), da.pat.TuplePattern([da.pat.FreePattern('r1'), da.pat.FreePattern('leader1')])])
PatternExpr_972 = da.pat.TuplePattern([da.pat.FreePattern(None), da.pat.TuplePattern([da.pat.FreePattern(None), da.pat.FreePattern(None), da.pat.FreePattern(None)]), da.pat.TuplePattern([da.pat.ConstantPattern('done')])])
PatternExpr_1282 = da.pat.TuplePattern([da.pat.ConstantPattern('response'), da.pat.FreePattern('cid'), da.pat.FreePattern('result')])
PatternExpr_1483 = da.pat.TuplePattern([da.pat.ConstantPattern('done')])
PatternExpr_1488 = da.pat.BoundPattern('_BoundPattern1489_')
PatternExpr_1490 = da.pat.TuplePattern([da.pat.FreePattern(None), da.pat.TuplePattern([da.pat.FreePattern(None), da.pat.FreePattern(None), da.pat.BoundPattern('_BoundPattern1496_')]), da.pat.TuplePattern([da.pat.ConstantPattern('done')])])
_config_object = {}
import sys
import time
import random
NOPS = 10

def operation(i):
    return (lambda state: ((state + [i]), ['result', i, 'on', state]))
operations = {i: operation(i) for i in range(NOPS)}

class Replica(da.DistProcess):

    def __init__(self, procimpl, props):
        super().__init__(procimpl, props)
        self._ReplicaReceivedEvent_0 = []
        self._events.extend([da.pat.EventPattern(da.pat.ReceivedEvent, '_ReplicaReceivedEvent_0', PatternExpr_385, sources=None, destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.ReceivedEvent, '_ReplicaReceivedEvent_1', PatternExpr_405, sources=None, destinations=None, timestamps=None, record_history=None, handlers=[self._Replica_handler_404]), da.pat.EventPattern(da.pat.ReceivedEvent, '_ReplicaReceivedEvent_2', PatternExpr_422, sources=None, destinations=None, timestamps=None, record_history=None, handlers=[self._Replica_handler_421])])

    def setup(self, leaders, initial_state, **rest_1511):
        super().setup(leaders=leaders, initial_state=initial_state, **rest_1511)
        self._state.leaders = leaders
        self._state.initial_state = initial_state
        self._state.state = self._state.initial_state
        self._state.slot_num = 1
        self._state.proposals = set()
        self._state.decisions = set()

    def run(self):
        self.debug('### start')
        super()._label('_st_label_382', block=False)
        _st_label_382 = 0
        while (_st_label_382 == 0):
            _st_label_382 += 1
            if PatternExpr_390.match_iter(self._ReplicaReceivedEvent_0, SELF_ID=self._id):
                _st_label_382 += 1
            else:
                super()._label('_st_label_382', block=True)
                _st_label_382 -= 1
        self.output('terminating')

    def propose(self, p):

        def ExistentialOpExpr_244():
            for (_, _BoundPattern248_) in self._state.decisions:
                if (_BoundPattern248_ == p):
                    if True:
                        return True
            return False
        if (not ExistentialOpExpr_244()):
            maxs = max(({s for (s, _) in (self._state.proposals | self._state.decisions)} or {0}))

            def ExistentialOpExpr_286(s):
                for (_BoundPattern289_, _) in (self._state.proposals | self._state.decisions):
                    if (_BoundPattern289_ == s):
                        if True:
                            return True
                return False
            s1 = min({s for s in range(1, ((maxs + 1) + 1)) if (not ExistentialOpExpr_286(s=s))})
            self._state.proposals.add((s1, p))
            self.send(('propose', s1, p), to=self._state.leaders)

    def perform(self, p):
        self.debug('### perform', p)
        (client, cid, op) = p
        s = None

        def ExistentialOpExpr_330():
            nonlocal s
            for (s, _BoundPattern335_) in self._state.decisions:
                if (_BoundPattern335_ == p):
                    if (s < self._state.slot_num):
                        return True
            return False
        if ExistentialOpExpr_330():
            self._state.slot_num += 1
        else:
            self.debug('===', self._state.state, op)
            (next, result) = operations[op](self._state.state)
            self.debug('===', next, result)
            self._state.state = next
            self._state.slot_num += 1
            self.send(('response', cid, result), to=client)

    def _Replica_handler_404(self, p):
        self.debug('### request', p)
        self.propose(p)
    _Replica_handler_404._labels = None
    _Replica_handler_404._notlabels = None

    def _Replica_handler_421(self, s, p):
        self.debug('### decision', s, p)
        self._state.decisions.add((s, p))
        p1 = None

        def ExistentialOpExpr_444():
            nonlocal p1
            for (_BoundPattern447_, p1) in self._state.decisions:
                if (_BoundPattern447_ == self._state.slot_num):
                    if True:
                        return True
            return False
        while ExistentialOpExpr_444():
            p2 = None

            def ExistentialOpExpr_454():
                nonlocal p2
                for (_BoundPattern457_, p2) in self._state.proposals:
                    if (_BoundPattern457_ == self._state.slot_num):
                        if (not (p2 == p1)):
                            return True
                return False
            if ExistentialOpExpr_454():
                self.propose(p2)
            self.perform(p1)
    _Replica_handler_421._labels = None
    _Replica_handler_421._notlabels = None

class Acceptor(da.DistProcess):

    def __init__(self, procimpl, props):
        super().__init__(procimpl, props)
        self._AcceptorReceivedEvent_0 = []
        self._AcceptorReceivedEvent_2 = []
        self._AcceptorReceivedEvent_3 = []
        self._events.extend([da.pat.EventPattern(da.pat.ReceivedEvent, '_AcceptorReceivedEvent_0', PatternExpr_502, sources=None, destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.ReceivedEvent, '_AcceptorReceivedEvent_1', PatternExpr_522, sources=None, destinations=None, timestamps=None, record_history=None, handlers=[self._Acceptor_handler_521]), da.pat.EventPattern(da.pat.ReceivedEvent, '_AcceptorReceivedEvent_2', PatternExpr_540, sources=None, destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.ReceivedEvent, '_AcceptorReceivedEvent_3', PatternExpr_564, sources=None, destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.ReceivedEvent, '_AcceptorReceivedEvent_4', PatternExpr_595, sources=None, destinations=None, timestamps=None, record_history=None, handlers=[self._Acceptor_handler_594]), da.pat.EventPattern(da.pat.ReceivedEvent, '_AcceptorReceivedEvent_5', PatternExpr_619, sources=None, destinations=None, timestamps=None, record_history=None, handlers=[self._Acceptor_handler_618])])

    def setup(self, **rest_1511):
        super().setup(**rest_1511)
        self._state.ballot_num = None
        self._state.accepted = set()

    def run(self):
        self.debug('### start')
        super()._label('_st_label_499', block=False)
        _st_label_499 = 0
        while (_st_label_499 == 0):
            _st_label_499 += 1
            if PatternExpr_507.match_iter(self._AcceptorReceivedEvent_0, SELF_ID=self._id):
                _st_label_499 += 1
            else:
                super()._label('_st_label_499', block=True)
                _st_label_499 -= 1
        self.output('terminating')

    def _Acceptor_handler_521(self, m):
        BOTTOM = ((- 1), (- 1))
        self._state.ballot_num = max((({b for (_, _, (_ConstantPattern556_, _, b)) in self._AcceptorReceivedEvent_2 if (_ConstantPattern556_ == 'p1a')} | {b for (_, _, (_ConstantPattern582_, _, b, _, _)) in self._AcceptorReceivedEvent_3 if (_ConstantPattern582_ == 'p2a')}) or {BOTTOM}))
    _Acceptor_handler_521._labels = None
    _Acceptor_handler_521._notlabels = None

    def _Acceptor_handler_594(self, leader_scout, b):
        self.debug('### p1a', leader_scout, b)
        self.send(('p1b', self._id, self._state.ballot_num, self._state.accepted), to=leader_scout)
    _Acceptor_handler_594._labels = None
    _Acceptor_handler_594._notlabels = None

    def _Acceptor_handler_618(self, leader_commander, b, s, p):
        self.debug('### p2a', leader_commander, b, s, p)
        if (b == self._state.ballot_num):
            self._state.accepted.add((b, s, p))
        self.send(('p2b', self._id, self._state.ballot_num), to=leader_commander)
    _Acceptor_handler_618._labels = None
    _Acceptor_handler_618._notlabels = None

class Commander(da.DistProcess):

    def __init__(self, procimpl, props):
        super().__init__(procimpl, props)
        self._CommanderReceivedEvent_0 = []
        self._CommanderReceivedEvent_1 = []
        self._events.extend([da.pat.EventPattern(da.pat.ReceivedEvent, '_CommanderReceivedEvent_0', PatternExpr_695, sources=None, destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.ReceivedEvent, '_CommanderReceivedEvent_1', PatternExpr_731, sources=None, destinations=None, timestamps=None, record_history=True, handlers=[])])

    def setup(self, leader, acceptors, replicas, b, s, p, **rest_1511):
        super().setup(leader=leader, acceptors=acceptors, replicas=replicas, b=b, s=s, p=p, **rest_1511)
        self._state.leader = leader
        self._state.acceptors = acceptors
        self._state.replicas = replicas
        self._state.b = b
        self._state.s = s
        self._state.p = p
        pass

    def run(self):
        self.debug('### start')
        self.send(('p2a', self._id, self._state.b, self._state.s, self._state.p), to=self._state.acceptors)
        super()._label('_st_label_690', block=False)
        b1 = None

        def ExistentialOpExpr_729():
            nonlocal b1
            for (_, _, (_ConstantPattern747_, _, b1)) in self._CommanderReceivedEvent_1:
                if (_ConstantPattern747_ == 'p2b'):
                    if (not (b1 == self._state.b)):
                        return True
            return False
        _st_label_690 = 0
        while (_st_label_690 == 0):
            _st_label_690 += 1
            if (len({a for (_, _, (_ConstantPattern711_, a, _BoundPattern714_)) in self._CommanderReceivedEvent_0 if (_ConstantPattern711_ == 'p2b') if (_BoundPattern714_ == self._state.b)}) > (len(self._state.acceptors) / 2)):
                self.send(('decision', self._state.s, self._state.p), to=self._state.replicas)
                _st_label_690 += 1
            elif ExistentialOpExpr_729():
                self.send(('preempted', b1), to=self._state.leader)
                _st_label_690 += 1
            else:
                super()._label('_st_label_690', block=True)
                _st_label_690 -= 1

class Scout(da.DistProcess):

    def __init__(self, procimpl, props):
        super().__init__(procimpl, props)
        self._ScoutReceivedEvent_0 = []
        self._ScoutReceivedEvent_1 = []
        self._ScoutReceivedEvent_2 = []
        self._events.extend([da.pat.EventPattern(da.pat.ReceivedEvent, '_ScoutReceivedEvent_0', PatternExpr_805, sources=None, destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.ReceivedEvent, '_ScoutReceivedEvent_1', PatternExpr_837, sources=None, destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.ReceivedEvent, '_ScoutReceivedEvent_2', PatternExpr_876, sources=None, destinations=None, timestamps=None, record_history=True, handlers=[])])

    def setup(self, leader, acceptors, b, **rest_1511):
        super().setup(leader=leader, acceptors=acceptors, b=b, **rest_1511)
        self._state.leader = leader
        self._state.acceptors = acceptors
        self._state.b = b
        self._state.pvalues = set()

    def run(self):
        self.debug('### start')
        time.sleep(random.random())
        self.send(('p1a', self._id, self._state.b), to=self._state.acceptors)
        super()._label('_st_label_800', block=False)
        b1 = a = None

        def ExistentialOpExpr_874():
            nonlocal b1, a
            for (_, _, (_ConstantPattern894_, a, b1, _)) in self._ScoutReceivedEvent_2:
                if (_ConstantPattern894_ == 'p1b'):
                    if (not (b1 == self._state.b)):
                        return True
            return False
        _st_label_800 = 0
        while (_st_label_800 == 0):
            _st_label_800 += 1
            if (len({a for (_, _, (_ConstantPattern822_, a, _BoundPattern825_, _)) in self._ScoutReceivedEvent_0 if (_ConstantPattern822_ == 'p1b') if (_BoundPattern825_ == self._state.b)}) > (len(self._state.acceptors) / 2)):
                self._state.pvalues = {v for (_, _, (_ConstantPattern854_, _, _BoundPattern857_, r)) in self._ScoutReceivedEvent_1 if (_ConstantPattern854_ == 'p1b') if (_BoundPattern857_ == self._state.b) for v in r}
                self.send(('adopted', self._state.b, self._state.pvalues), to=self._state.leader)
                _st_label_800 += 1
            elif ExistentialOpExpr_874():
                self.send(('preempted', b1), to=self._state.leader)
                _st_label_800 += 1
            else:
                super()._label('_st_label_800', block=True)
                _st_label_800 -= 1

class Leader(da.DistProcess):

    def __init__(self, procimpl, props):
        super().__init__(procimpl, props)
        self._LeaderReceivedEvent_0 = []
        self._events.extend([da.pat.EventPattern(da.pat.ReceivedEvent, '_LeaderReceivedEvent_0', PatternExpr_967, sources=None, destinations=None, timestamps=None, record_history=True, handlers=[]), da.pat.EventPattern(da.pat.ReceivedEvent, '_LeaderReceivedEvent_1', PatternExpr_987, sources=None, destinations=None, timestamps=None, record_history=None, handlers=[self._Leader_handler_986]), da.pat.EventPattern(da.pat.ReceivedEvent, '_LeaderReceivedEvent_2', PatternExpr_1039, sources=None, destinations=None, timestamps=None, record_history=None, handlers=[self._Leader_handler_1038]), da.pat.EventPattern(da.pat.ReceivedEvent, '_LeaderReceivedEvent_3', PatternExpr_1091, sources=None, destinations=None, timestamps=None, record_history=None, handlers=[self._Leader_handler_1090])])

    def setup(self, acceptors, replicas, **rest_1511):
        super().setup(acceptors=acceptors, replicas=replicas, **rest_1511)
        self._state.acceptors = acceptors
        self._state.replicas = replicas
        self._state.ballot_num = (0, self._id)
        self._state.active = False
        self._state.proposals = set()

    def run(self):
        self.debug('### start')
        sub = self.new(Scout, (self._id, self._state.acceptors, self._state.ballot_num), method='thread', daemon=True)
        self._start(sub)
        super()._label('_st_label_964', block=False)
        _st_label_964 = 0
        while (_st_label_964 == 0):
            _st_label_964 += 1
            if PatternExpr_972.match_iter(self._LeaderReceivedEvent_0, SELF_ID=self._id):
                _st_label_964 += 1
            else:
                super()._label('_st_label_964', block=True)
                _st_label_964 -= 1
        self.output('terminating')

    def circle_plus(self, x, y):

        def ExistentialOpExpr_1148(s):
            for (_BoundPattern1151_, _) in y:
                if (_BoundPattern1151_ == s):
                    if True:
                        return True
            return False
        return (y | {(s, p) for (s, p) in x if (not ExistentialOpExpr_1148(s=s))})

    def pmax(self, pvals):

        def UniversalOpExpr_1174(s, b):
            for (b1, _BoundPattern1179_, _) in pvals:
                if (_BoundPattern1179_ == s):
                    if (not (b1 <= b)):
                        return False
            return True
        return {(s, p) for (b, s, p) in pvals if UniversalOpExpr_1174(s=s, b=b)}

    def _Leader_handler_986(self, s, p):
        self.debug('### propose', s, p)

        def ExistentialOpExpr_1003():
            for (_BoundPattern1006_, _) in self._state.proposals:
                if (_BoundPattern1006_ == s):
                    if True:
                        return True
            return False
        if (not ExistentialOpExpr_1003()):
            self._state.proposals.add((s, p))
            if self._state.active:
                sub = self.new(Commander, (self._id, self._state.acceptors, self._state.replicas, self._state.ballot_num, s, p), method='thread', daemon=True)
                self._start(sub)
    _Leader_handler_986._labels = None
    _Leader_handler_986._notlabels = None

    def _Leader_handler_1038(self, ballot_num, pvals):
        self.debug('### adopted', ballot_num, pvals)
        self._state.proposals = self.circle_plus(self._state.proposals, self.pmax(pvals))
        for (s, p) in self._state.proposals:
            sub = self.new(Commander, (self._id, self._state.acceptors, self._state.replicas, ballot_num, s, p), method='thread', daemon=True)
            self._start(sub)
        self._state.active = True
    _Leader_handler_1038._labels = None
    _Leader_handler_1038._notlabels = None

    def _Leader_handler_1090(self, r1, leader1):
        if ((r1, leader1) > self._state.ballot_num):
            self._state.active = False
            self._state.ballot_num = ((r1 + 1), self._id)
            sub = self.new(Scout, (self._id, self._state.acceptors, self._state.ballot_num), method='thread', daemon=True)
            self._start(sub)
    _Leader_handler_1090._labels = None
    _Leader_handler_1090._notlabels = None

class Client(da.DistProcess):

    def __init__(self, procimpl, props):
        super().__init__(procimpl, props)
        self._events.extend([da.pat.EventPattern(da.pat.ReceivedEvent, '_ClientReceivedEvent_0', PatternExpr_1282, sources=None, destinations=None, timestamps=None, record_history=None, handlers=[self._Client_handler_1281])])

    def setup(self, replicas, nops, **rest_1511):
        super().setup(replicas=replicas, nops=nops, **rest_1511)
        self._state.replicas = replicas
        self._state.nops = nops
        self._state.cid = 0
        self._state.results = dict()
        self._state.count = dict()

    def run(self):
        for i in range(self._state.nops):
            self.send(('request', (self._id, self._state.cid, random.randint(0, (NOPS - 1)))), to=self._state.replicas)
            super()._label('_st_label_1244', block=False)
            _st_label_1244 = 0
            while (_st_label_1244 == 0):
                _st_label_1244 += 1
                if (self._state.cid in self._state.results):
                    _st_label_1244 += 1
                else:
                    super()._label('_st_label_1244', block=True)
                    _st_label_1244 -= 1
            else:
                if (_st_label_1244 != 2):
                    continue
            if (_st_label_1244 != 2):
                break
            self.output('received result', self._state.cid, self._state.results[self._state.cid])
            self._state.cid += 1
        super()._label('_st_label_1258', block=False)
        cid = None

        def UniversalOpExpr_1259():
            nonlocal cid
            for self._state.cid in range(self._state.nops):
                if (not (self._state.count[self._state.cid] == len(self._state.replicas))):
                    return False
            return True
        _st_label_1258 = 0
        while (_st_label_1258 == 0):
            _st_label_1258 += 1
            if UniversalOpExpr_1259():
                _st_label_1258 += 1
            else:
                super()._label('_st_label_1258', block=True)
                _st_label_1258 -= 1
        self.output('terminating')
        self.send(('done',), to=self.parent())

    def _Client_handler_1281(self, cid, result):
        self.debug('### response', cid, result)
        if (not (cid in self._state.results)):
            self._state.results[cid] = result
        elif (not (self._state.results[cid] == result)):
            self.error('different result', cid, result, 'than', self._state.results[cid])
        self._state.count[cid] = (1 if (not (cid in self._state.count)) else (self._state.count[cid] + 1))
    _Client_handler_1281._labels = None
    _Client_handler_1281._notlabels = None

class Node_(da.NodeProcess):

    def __init__(self, procimpl, props):
        super().__init__(procimpl, props)
        self._Node_ReceivedEvent_0 = []
        self._events.extend([da.pat.EventPattern(da.pat.ReceivedEvent, '_Node_ReceivedEvent_0', PatternExpr_1483, sources=[PatternExpr_1488], destinations=None, timestamps=None, record_history=True, handlers=[])])

    def run(self):
        nacceptors = (int(sys.argv[1]) if (len(sys.argv) > 1) else 5)
        nreplicas = (int(sys.argv[2]) if (len(sys.argv) > 2) else 4)
        nleaders = (int(sys.argv[3]) if (len(sys.argv) > 3) else 2)
        nclients = (int(sys.argv[4]) if (len(sys.argv) > 4) else 3)
        nops = (int(sys.argv[5]) if (len(sys.argv) > 5) else 3)
        acceptors = self.new(Acceptor, (), num=nacceptors)
        replicas = self.new(Replica, num=nreplicas)
        leaders = self.new(Leader, (acceptors, replicas), num=nleaders)
        initial_state = []
        self._setup(replicas, (leaders, initial_state))
        clients = self.new(Client, (replicas, nops), num=nclients)
        self._start(acceptors)
        self._start((replicas | leaders))
        self._start(clients)
        super()._label('_st_label_1474', block=False)
        c = None

        def UniversalOpExpr_1475():
            nonlocal c
            for c in clients:
                if (not PatternExpr_1490.match_iter(self._Node_ReceivedEvent_0, _BoundPattern1496_=c)):
                    return False
            return True
        _st_label_1474 = 0
        while (_st_label_1474 == 0):
            _st_label_1474 += 1
            if UniversalOpExpr_1475():
                _st_label_1474 += 1
            else:
                super()._label('_st_label_1474', block=True)
                _st_label_1474 -= 1
        self.output('All clients done.')
        self.send(('done',), to=((acceptors | replicas) | leaders))
