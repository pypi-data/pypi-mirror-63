{"version":3,"sources":["webpack:///./src/data/config_flow.ts","webpack:///./src/dialogs/config-flow/show-dialog-data-entry-flow.ts","webpack:///./src/dialogs/config-flow/show-dialog-config-flow.ts","webpack:///./src/panels/lovelace/cards/hui-ais-files-list-card.js"],"names":["__webpack_require__","d","__webpack_exports__","DISCOVERY_SOURCES","createConfigFlow","fetchConfigFlow","handleConfigFlowStep","ignoreConfigFlow","deleteConfigFlow","getConfigFlowHandlers","getConfigFlowInProgressCollection","subscribeConfigFlowInProgress","localizeConfigFlowTitle","_common_util_debounce__WEBPACK_IMPORTED_MODULE_0__","home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_1__","hass","handler","callApi","flowId","concat","data","callWS","type","flow_id","fetchConfigFlowInProgress","conn","sendMessagePromise","subscribeConfigFlowInProgressUpdates","store","subscribeEvents","debounce","then","flows","setState","getCollection","onChange","connection","subscribe","localize","flow","placeholders","context","title_placeholders","placeholderKeys","Object","keys","length","args","forEach","key","push","apply","loadDataEntryFlowDialog","showFlowDialog","_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__","Promise","all","e","bind","element","dialogParams","flowConfig","fireEvent","dialogTag","dialogImport","assign","loadConfigFlowDialog","showConfigFlowDialog","loadDevicesAndAreas","getFlowHandlers","handlers","sort","handlerA","handlerB","caseInsensitiveCompare","createFlow","fetchFlow","handleFlowStep","deleteFlow","renderAbortDescription","step","description","localizeKey","reason","description_placeholders","html","_templateObject","renderShowFormStepHeader","step_id","renderShowFormStepDescription","_templateObject2","renderShowFormStepFieldLabel","field","name","renderShowFormStepFieldError","error","renderExternalStepHeader","renderExternalStepDescription","_templateObject3","_templateObject4","renderCreateEntryDescription","_templateObject5","_templateObject6","title","FilesCard","_this","_classCallCheck","this","_possibleConstructorReturn","_getPrototypeOf","call","attachShadow","mode","HTMLElement","config","entity","Error","root","shadowRoot","lastChild","removeChild","cardConfig","card","document","createElement","content","style","textContent","id","header","appendChild","_config","states","feed","attributes","files","path","state","display","rowLimit","row_limit","rows","undefined","cardContent","iconStatus","classStatus","i","endsWith","icon","getElementById","innerHTML","querySelectorAll","waitIcon","setAttribute","file","addEventListener","classList","add","querySelector","callService","getAttribute","addNewDrive","result","continueFlowId","dialogClosedCallback","customElements","define"],"mappings":"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","file":"chunk.fc58e3f34e802b7aad24.js","sourcesContent":["import { HomeAssistant } from \"../types\";\nimport { DataEntryFlowStep, DataEntryFlowProgress } from \"./data_entry_flow\";\nimport { debounce } from \"../common/util/debounce\";\nimport { getCollection, Connection } from \"home-assistant-js-websocket\";\nimport { LocalizeFunc } from \"../common/translations/localize\";\n\nexport const DISCOVERY_SOURCES = [\"unignore\", \"homekit\", \"ssdp\", \"zeroconf\"];\n\nexport const createConfigFlow = (hass: HomeAssistant, handler: string) =>\n  hass.callApi<DataEntryFlowStep>(\"POST\", \"config/config_entries/flow\", {\n    handler,\n  });\n\nexport const fetchConfigFlow = (hass: HomeAssistant, flowId: string) =>\n  hass.callApi<DataEntryFlowStep>(\n    \"GET\",\n    `config/config_entries/flow/${flowId}`\n  );\n\nexport const handleConfigFlowStep = (\n  hass: HomeAssistant,\n  flowId: string,\n  data: { [key: string]: any }\n) =>\n  hass.callApi<DataEntryFlowStep>(\n    \"POST\",\n    `config/config_entries/flow/${flowId}`,\n    data\n  );\n\nexport const ignoreConfigFlow = (hass: HomeAssistant, flowId: string) =>\n  hass.callWS({ type: \"config_entries/ignore_flow\", flow_id: flowId });\n\nexport const deleteConfigFlow = (hass: HomeAssistant, flowId: string) =>\n  hass.callApi(\"DELETE\", `config/config_entries/flow/${flowId}`);\n\nexport const getConfigFlowHandlers = (hass: HomeAssistant) =>\n  hass.callApi<string[]>(\"GET\", \"config/config_entries/flow_handlers\");\n\nconst fetchConfigFlowInProgress = (conn) =>\n  conn.sendMessagePromise({\n    type: \"config_entries/flow/progress\",\n  });\n\nconst subscribeConfigFlowInProgressUpdates = (conn, store) =>\n  conn.subscribeEvents(\n    debounce(\n      () =>\n        fetchConfigFlowInProgress(conn).then((flows) =>\n          store.setState(flows, true)\n        ),\n      500,\n      true\n    ),\n    \"config_entry_discovered\"\n  );\n\nexport const getConfigFlowInProgressCollection = (conn: Connection) =>\n  getCollection<DataEntryFlowProgress[]>(\n    conn,\n    \"_configFlowProgress\",\n    fetchConfigFlowInProgress,\n    subscribeConfigFlowInProgressUpdates\n  );\n\nexport const subscribeConfigFlowInProgress = (\n  hass: HomeAssistant,\n  onChange: (flows: DataEntryFlowProgress[]) => void\n) => getConfigFlowInProgressCollection(hass.connection).subscribe(onChange);\n\nexport const localizeConfigFlowTitle = (\n  localize: LocalizeFunc,\n  flow: DataEntryFlowProgress\n) => {\n  const placeholders = flow.context.title_placeholders || {};\n  const placeholderKeys = Object.keys(placeholders);\n  if (placeholderKeys.length === 0) {\n    return localize(`component.${flow.handler}.config.title`);\n  }\n  const args: string[] = [];\n  placeholderKeys.forEach((key) => {\n    args.push(key);\n    args.push(placeholders[key]);\n  });\n  return localize(`component.${flow.handler}.config.flow_title`, ...args);\n};\n","import { TemplateResult } from \"lit-html\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { HomeAssistant } from \"../../types\";\nimport {\n  DataEntryFlowStepCreateEntry,\n  DataEntryFlowStepExternal,\n  DataEntryFlowStepForm,\n  DataEntryFlowStep,\n  DataEntryFlowStepAbort,\n} from \"../../data/data_entry_flow\";\nimport { HaFormSchema } from \"../../components/ha-form/ha-form\";\n\nexport interface FlowConfig {\n  loadDevicesAndAreas: boolean;\n\n  getFlowHandlers?: (hass: HomeAssistant) => Promise<string[]>;\n\n  createFlow(hass: HomeAssistant, handler: string): Promise<DataEntryFlowStep>;\n\n  fetchFlow(hass: HomeAssistant, flowId: string): Promise<DataEntryFlowStep>;\n\n  handleFlowStep(\n    hass: HomeAssistant,\n    flowId: string,\n    data: { [key: string]: any }\n  ): Promise<DataEntryFlowStep>;\n\n  deleteFlow(hass: HomeAssistant, flowId: string): Promise<unknown>;\n\n  renderAbortDescription(\n    hass: HomeAssistant,\n    step: DataEntryFlowStepAbort\n  ): TemplateResult | \"\";\n\n  renderShowFormStepHeader(\n    hass: HomeAssistant,\n    step: DataEntryFlowStepForm\n  ): string;\n\n  renderShowFormStepDescription(\n    hass: HomeAssistant,\n    step: DataEntryFlowStepForm\n  ): TemplateResult | \"\";\n\n  renderShowFormStepFieldLabel(\n    hass: HomeAssistant,\n    step: DataEntryFlowStepForm,\n    field: HaFormSchema\n  ): string;\n\n  renderShowFormStepFieldError(\n    hass: HomeAssistant,\n    step: DataEntryFlowStepForm,\n    error: string\n  ): string;\n\n  renderExternalStepHeader(\n    hass: HomeAssistant,\n    step: DataEntryFlowStepExternal\n  ): string;\n\n  renderExternalStepDescription(\n    hass: HomeAssistant,\n    step: DataEntryFlowStepExternal\n  ): TemplateResult | \"\";\n\n  renderCreateEntryDescription(\n    hass: HomeAssistant,\n    step: DataEntryFlowStepCreateEntry\n  ): TemplateResult | \"\";\n}\n\nexport interface DataEntryFlowDialogParams {\n  startFlowHandler?: string;\n  continueFlowId?: string;\n  dialogClosedCallback?: (params: { flowFinished: boolean }) => void;\n  flowConfig: FlowConfig;\n  showAdvanced?: boolean;\n}\n\nexport const loadDataEntryFlowDialog = () =>\n  import(\n    /* webpackChunkName: \"dialog-config-flow\" */ \"./dialog-data-entry-flow\"\n  );\n\nexport const showFlowDialog = (\n  element: HTMLElement,\n  dialogParams: Omit<DataEntryFlowDialogParams, \"flowConfig\">,\n  flowConfig: FlowConfig\n): void => {\n  fireEvent(element, \"show-dialog\", {\n    dialogTag: \"dialog-data-entry-flow\",\n    dialogImport: loadDataEntryFlowDialog,\n    dialogParams: {\n      ...dialogParams,\n      flowConfig,\n    },\n  });\n};\n","import {\n  getConfigFlowHandlers,\n  fetchConfigFlow,\n  handleConfigFlowStep,\n  deleteConfigFlow,\n  createConfigFlow,\n} from \"../../data/config_flow\";\nimport { html } from \"lit-element\";\nimport { localizeKey } from \"../../common/translations/localize\";\nimport {\n  showFlowDialog,\n  DataEntryFlowDialogParams,\n  loadDataEntryFlowDialog,\n} from \"./show-dialog-data-entry-flow\";\nimport { caseInsensitiveCompare } from \"../../common/string/compare\";\n\nexport const loadConfigFlowDialog = loadDataEntryFlowDialog;\n\nexport const showConfigFlowDialog = (\n  element: HTMLElement,\n  dialogParams: Omit<DataEntryFlowDialogParams, \"flowConfig\">\n): void =>\n  showFlowDialog(element, dialogParams, {\n    loadDevicesAndAreas: true,\n    getFlowHandlers: (hass) =>\n      getConfigFlowHandlers(hass).then((handlers) =>\n        handlers.sort((handlerA, handlerB) =>\n          caseInsensitiveCompare(\n            hass.localize(`component.${handlerA}.config.title`),\n            hass.localize(`component.${handlerB}.config.title`)\n          )\n        )\n      ),\n    createFlow: createConfigFlow,\n    fetchFlow: fetchConfigFlow,\n    handleFlowStep: handleConfigFlowStep,\n    deleteFlow: deleteConfigFlow,\n\n    renderAbortDescription(hass, step) {\n      const description = localizeKey(\n        hass.localize,\n        `component.${step.handler}.config.abort.${step.reason}`,\n        step.description_placeholders\n      );\n\n      return description\n        ? html`\n            <ha-markdown allowsvg .content=${description}></ha-markdown>\n          `\n        : \"\";\n    },\n\n    renderShowFormStepHeader(hass, step) {\n      return hass.localize(\n        `component.${step.handler}.config.step.${step.step_id}.title`\n      );\n    },\n\n    renderShowFormStepDescription(hass, step) {\n      const description = localizeKey(\n        hass.localize,\n        `component.${step.handler}.config.step.${step.step_id}.description`,\n        step.description_placeholders\n      );\n      return description\n        ? html`\n            <ha-markdown allowsvg .content=${description}></ha-markdown>\n          `\n        : \"\";\n    },\n\n    renderShowFormStepFieldLabel(hass, step, field) {\n      return hass.localize(\n        `component.${step.handler}.config.step.${step.step_id}.data.${\n          field.name\n        }`\n      );\n    },\n\n    renderShowFormStepFieldError(hass, step, error) {\n      return hass.localize(`component.${step.handler}.config.error.${error}`);\n    },\n\n    renderExternalStepHeader(hass, step) {\n      return hass.localize(\n        `component.${step.handler}.config.step.${step.step_id}.title`\n      );\n    },\n\n    renderExternalStepDescription(hass, step) {\n      const description = localizeKey(\n        hass.localize,\n        `component.${step.handler}.config.${step.step_id}.description`,\n        step.description_placeholders\n      );\n\n      return html`\n        <p>\n          ${hass.localize(\n            \"ui.panel.config.integrations.config_flow.external_step.description\"\n          )}\n        </p>\n        ${description\n          ? html`\n              <ha-markdown allowsvg .content=${description}></ha-markdown>\n            `\n          : \"\"}\n      `;\n    },\n\n    renderCreateEntryDescription(hass, step) {\n      const description = localizeKey(\n        hass.localize,\n        `component.${step.handler}.config.create_entry.${step.description ||\n          \"default\"}`,\n        step.description_placeholders\n      );\n\n      return html`\n        ${description\n          ? html`\n              <ha-markdown allowsvg .content=${description}></ha-markdown>\n            `\n          : \"\"}\n        <p>\n          ${hass.localize(\n            \"ui.panel.config.integrations.config_flow.created_config\",\n            \"name\",\n            step.title\n          )}\n        </p>\n      `;\n    },\n  });\n","import { showConfigFlowDialog } from \"../../../dialogs/config-flow/show-dialog-config-flow\";\n\nclass FilesCard extends HTMLElement {\n  constructor() {\n    super();\n    this.attachShadow({ mode: \"open\" });\n  }\n\n  setConfig(config) {\n    if (!config.entity) {\n      throw new Error(\"Please define an entity\");\n    }\n\n    const root = this.shadowRoot;\n    if (root.lastChild) root.removeChild(root.lastChild);\n\n    const cardConfig = config;\n    const card = document.createElement(\"ha-card\");\n    const content = document.createElement(\"div\");\n    const style = document.createElement(\"style\");\n    style.textContent = `\n            tr{\n              height: 3em;\n            }\n            table {\n              width: 100%;\n              padding: 0 16px 16px 16px;\n              border-spacing: 0px;\n              table-layout: fixed;\n              overflow-wrap: break-word;\n            }\n            tr.fileRow:hover td{\n              background-color:#ffc9471f;\n              cursor: pointer;\n            }\n            tr th{\n              text-align: left;\n              font-weight: normal;\n            }\n            ha-icon {\n              display: flex;\n              width: auto;\n            }\n            tr.fileSelected td{\n              background-color:#ffc94773 !important;\n            }\n            tr.fileClicked td{\n              background-color:#ff9800eb !important;\n              cursor: wait !important;\n            }\n          `;\n\n    content.id = \"container\";\n    card.header = cardConfig.title;\n    card.appendChild(content);\n    card.appendChild(style);\n    root.appendChild(card);\n    this._config = cardConfig;\n  }\n\n  set hass(hass) {\n    const config = this._config;\n    const root = this.shadowRoot;\n\n    if (hass.states[config.entity]) {\n      const feed = hass.states[config.entity].attributes.files;\n      const path = hass.states[config.entity].state;\n      this.style.display = \"block\";\n      const rowLimit = config.row_limit\n        ? config.row_limit\n        : Object.keys(feed).length;\n      let rows = 0;\n\n      if (feed !== undefined && Object.keys(feed).length > 0) {\n        let iconHome;\n        if (path.length > 0) {\n          iconHome = '<ha-icon icon=\"mdi:home\"></ha-icon>';\n        } else {\n          iconHome = \"\";\n        }\n        let cardContent =\n          '<table><tr style=\"height:0px\"><th width=\"10%\">' +\n          iconHome +\n          '</th><th width=\"80%\">' +\n          path +\n          '</th><th width=\"10%\"></th></tr><tbody>';\n        let iconStatus = \"\";\n        let classStatus = \"\";\n        for (var i = 0; i < feed.length; i++) {\n          if (rows >= rowLimit) break;\n          if (path.length > 0 && feed[i].path.endsWith(path)) {\n            iconStatus = '<ha-icon icon=\"mdi:play\"></ha-icon>';\n            classStatus = \"fileSelected\";\n          } else {\n            iconStatus = \"\";\n            classStatus = \"\";\n          }\n          cardContent +=\n            `<tr class=\"fileRow ` +\n            classStatus +\n            `\" data-path=\"${feed[i].path}\">`;\n          cardContent += `<td><ha-icon icon=\"mdi:${feed[i].icon}\"></ha-icon></td>`;\n          cardContent += `<td>${feed[i].name}</td>`;\n          cardContent += `<td>` + iconStatus + `</td>`;\n          cardContent += `</tr>`;\n          ++rows;\n        }\n\n        // add new remote\n        if (path === \"/dyski-zdalne\") {\n          cardContent += `<tr style=\"height:1em\">`;\n          cardContent += `<td colspan=\"3\" style=\"text-align:right;\"><mwc-button id=\"addNewDrive\" style=\"float:right\">+ DYSK ZDALNY</mwc-button></td>`;\n          cardContent += `</tr>`;\n        }\n        root.lastChild.hass = hass;\n        cardContent += `</tbody></table>`;\n\n        root.getElementById(\"container\").innerHTML = cardContent;\n      } else {\n        this.style.display = \"none\";\n      }\n    } else {\n      this.style.display = \"none\";\n    }\n\n    //\n    const files = root.querySelectorAll(\"tr.fileRow\");\n    // const container = root.querySelector('#container');\n    const waitIcon = document.createElement(\"ha-icon\");\n    waitIcon.setAttribute(\"icon\", \"mdi:progress-download\");\n    files.forEach((file) => {\n      file.addEventListener(\"click\", () => {\n        file.classList.add(\"fileSelected\", \"fileClicked\");\n        file.querySelector(\"td:last-child\").appendChild(waitIcon);\n        hass.callService(\"ais_drives_service\", \"browse_path\", {\n          path: file.getAttribute(\"data-path\"),\n        });\n      });\n    });\n\n    function continueFlow(flowId) {\n      showConfigFlowDialog(document.querySelector(\"home-assistant\"), {\n        continueFlowId: flowId,\n        dialogClosedCallback: () => {},\n      });\n    }\n\n    const addNewDrive = root.getElementById(\"addNewDrive\");\n    if (addNewDrive !== null) {\n      addNewDrive.addEventListener(\"click\", function() {\n        hass\n          .callApi(\"POST\", \"config/config_entries/flow\", {\n            handler: \"ais_drives_service\",\n          })\n          .then((result) => {\n            continueFlow(result.flow_id);\n          });\n      });\n    }\n  }\n\n  getCardSize() {\n    return 4;\n  }\n}\n\ncustomElements.define(\"hui-ais-files-list-card\", FilesCard);\n"],"sourceRoot":""}