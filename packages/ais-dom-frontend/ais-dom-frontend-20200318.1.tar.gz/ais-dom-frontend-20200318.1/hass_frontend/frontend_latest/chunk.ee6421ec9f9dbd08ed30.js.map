{"version":3,"sources":["webpack:///./src/data/config_flow.ts","webpack:///./src/dialogs/config-flow/show-dialog-data-entry-flow.ts","webpack:///./src/dialogs/config-flow/show-dialog-config-flow.ts","webpack:///./src/panels/lovelace/cards/hui-ais-files-list-card.js"],"names":["__webpack_require__","d","__webpack_exports__","DISCOVERY_SOURCES","createConfigFlow","fetchConfigFlow","handleConfigFlowStep","ignoreConfigFlow","deleteConfigFlow","getConfigFlowHandlers","getConfigFlowInProgressCollection","subscribeConfigFlowInProgress","localizeConfigFlowTitle","_common_util_debounce__WEBPACK_IMPORTED_MODULE_0__","home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_1__","hass","handler","callApi","flowId","data","callWS","type","flow_id","fetchConfigFlowInProgress","conn","sendMessagePromise","subscribeConfigFlowInProgressUpdates","store","subscribeEvents","debounce","then","flows","setState","getCollection","onChange","connection","subscribe","localize","flow","placeholders","context","title_placeholders","placeholderKeys","Object","keys","length","args","forEach","key","push","loadDataEntryFlowDialog","showFlowDialog","_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__","Promise","all","e","bind","element","dialogParams","flowConfig","fireEvent","dialogTag","dialogImport","assign","loadConfigFlowDialog","showConfigFlowDialog","_data_config_flow__WEBPACK_IMPORTED_MODULE_0__","lit_element__WEBPACK_IMPORTED_MODULE_1__","_common_translations_localize__WEBPACK_IMPORTED_MODULE_2__","_show_dialog_data_entry_flow__WEBPACK_IMPORTED_MODULE_3__","_common_string_compare__WEBPACK_IMPORTED_MODULE_4__","loadDevicesAndAreas","getFlowHandlers","handlers","sort","handlerA","handlerB","caseInsensitiveCompare","createFlow","fetchFlow","handleFlowStep","deleteFlow","renderAbortDescription","step","description","localizeKey","reason","description_placeholders","html","renderShowFormStepHeader","step_id","renderShowFormStepDescription","renderShowFormStepFieldLabel","field","name","renderShowFormStepFieldError","error","renderExternalStepHeader","renderExternalStepDescription","renderCreateEntryDescription","title","r","_dialogs_config_flow_show_dialog_config_flow__WEBPACK_IMPORTED_MODULE_0__","customElements","define","HTMLElement","constructor","super","this","attachShadow","mode","setConfig","config","entity","Error","root","shadowRoot","lastChild","removeChild","cardConfig","card","document","createElement","content","style","textContent","id","header","appendChild","_config","states","feed","attributes","files","path","state","display","rowLimit","row_limit","rows","undefined","iconHome","cardContent","iconStatus","classStatus","i","endsWith","icon","getElementById","innerHTML","querySelectorAll","waitIcon","setAttribute","file","addEventListener","classList","add","querySelector","callService","getAttribute","addNewDrive","result","continueFlowId","dialogClosedCallback","continueFlow","getCardSize"],"mappings":"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","file":"chunk.ee6421ec9f9dbd08ed30.js","sourcesContent":["import { HomeAssistant } from \"../types\";\nimport { DataEntryFlowStep, DataEntryFlowProgress } from \"./data_entry_flow\";\nimport { debounce } from \"../common/util/debounce\";\nimport { getCollection, Connection } from \"home-assistant-js-websocket\";\nimport { LocalizeFunc } from \"../common/translations/localize\";\n\nexport const DISCOVERY_SOURCES = [\"unignore\", \"homekit\", \"ssdp\", \"zeroconf\"];\n\nexport const createConfigFlow = (hass: HomeAssistant, handler: string) =>\n  hass.callApi<DataEntryFlowStep>(\"POST\", \"config/config_entries/flow\", {\n    handler,\n  });\n\nexport const fetchConfigFlow = (hass: HomeAssistant, flowId: string) =>\n  hass.callApi<DataEntryFlowStep>(\n    \"GET\",\n    `config/config_entries/flow/${flowId}`\n  );\n\nexport const handleConfigFlowStep = (\n  hass: HomeAssistant,\n  flowId: string,\n  data: { [key: string]: any }\n) =>\n  hass.callApi<DataEntryFlowStep>(\n    \"POST\",\n    `config/config_entries/flow/${flowId}`,\n    data\n  );\n\nexport const ignoreConfigFlow = (hass: HomeAssistant, flowId: string) =>\n  hass.callWS({ type: \"config_entries/ignore_flow\", flow_id: flowId });\n\nexport const deleteConfigFlow = (hass: HomeAssistant, flowId: string) =>\n  hass.callApi(\"DELETE\", `config/config_entries/flow/${flowId}`);\n\nexport const getConfigFlowHandlers = (hass: HomeAssistant) =>\n  hass.callApi<string[]>(\"GET\", \"config/config_entries/flow_handlers\");\n\nconst fetchConfigFlowInProgress = (conn) =>\n  conn.sendMessagePromise({\n    type: \"config_entries/flow/progress\",\n  });\n\nconst subscribeConfigFlowInProgressUpdates = (conn, store) =>\n  conn.subscribeEvents(\n    debounce(\n      () =>\n        fetchConfigFlowInProgress(conn).then((flows) =>\n          store.setState(flows, true)\n        ),\n      500,\n      true\n    ),\n    \"config_entry_discovered\"\n  );\n\nexport const getConfigFlowInProgressCollection = (conn: Connection) =>\n  getCollection<DataEntryFlowProgress[]>(\n    conn,\n    \"_configFlowProgress\",\n    fetchConfigFlowInProgress,\n    subscribeConfigFlowInProgressUpdates\n  );\n\nexport const subscribeConfigFlowInProgress = (\n  hass: HomeAssistant,\n  onChange: (flows: DataEntryFlowProgress[]) => void\n) => getConfigFlowInProgressCollection(hass.connection).subscribe(onChange);\n\nexport const localizeConfigFlowTitle = (\n  localize: LocalizeFunc,\n  flow: DataEntryFlowProgress\n) => {\n  const placeholders = flow.context.title_placeholders || {};\n  const placeholderKeys = Object.keys(placeholders);\n  if (placeholderKeys.length === 0) {\n    return localize(`component.${flow.handler}.config.title`);\n  }\n  const args: string[] = [];\n  placeholderKeys.forEach((key) => {\n    args.push(key);\n    args.push(placeholders[key]);\n  });\n  return localize(`component.${flow.handler}.config.flow_title`, ...args);\n};\n","import { TemplateResult } from \"lit-html\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { HomeAssistant } from \"../../types\";\nimport {\n  DataEntryFlowStepCreateEntry,\n  DataEntryFlowStepExternal,\n  DataEntryFlowStepForm,\n  DataEntryFlowStep,\n  DataEntryFlowStepAbort,\n} from \"../../data/data_entry_flow\";\nimport { HaFormSchema } from \"../../components/ha-form/ha-form\";\n\nexport interface FlowConfig {\n  loadDevicesAndAreas: boolean;\n\n  getFlowHandlers?: (hass: HomeAssistant) => Promise<string[]>;\n\n  createFlow(hass: HomeAssistant, handler: string): Promise<DataEntryFlowStep>;\n\n  fetchFlow(hass: HomeAssistant, flowId: string): Promise<DataEntryFlowStep>;\n\n  handleFlowStep(\n    hass: HomeAssistant,\n    flowId: string,\n    data: { [key: string]: any }\n  ): Promise<DataEntryFlowStep>;\n\n  deleteFlow(hass: HomeAssistant, flowId: string): Promise<unknown>;\n\n  renderAbortDescription(\n    hass: HomeAssistant,\n    step: DataEntryFlowStepAbort\n  ): TemplateResult | \"\";\n\n  renderShowFormStepHeader(\n    hass: HomeAssistant,\n    step: DataEntryFlowStepForm\n  ): string;\n\n  renderShowFormStepDescription(\n    hass: HomeAssistant,\n    step: DataEntryFlowStepForm\n  ): TemplateResult | \"\";\n\n  renderShowFormStepFieldLabel(\n    hass: HomeAssistant,\n    step: DataEntryFlowStepForm,\n    field: HaFormSchema\n  ): string;\n\n  renderShowFormStepFieldError(\n    hass: HomeAssistant,\n    step: DataEntryFlowStepForm,\n    error: string\n  ): string;\n\n  renderExternalStepHeader(\n    hass: HomeAssistant,\n    step: DataEntryFlowStepExternal\n  ): string;\n\n  renderExternalStepDescription(\n    hass: HomeAssistant,\n    step: DataEntryFlowStepExternal\n  ): TemplateResult | \"\";\n\n  renderCreateEntryDescription(\n    hass: HomeAssistant,\n    step: DataEntryFlowStepCreateEntry\n  ): TemplateResult | \"\";\n}\n\nexport interface DataEntryFlowDialogParams {\n  startFlowHandler?: string;\n  continueFlowId?: string;\n  dialogClosedCallback?: (params: { flowFinished: boolean }) => void;\n  flowConfig: FlowConfig;\n  showAdvanced?: boolean;\n}\n\nexport const loadDataEntryFlowDialog = () =>\n  import(\n    /* webpackChunkName: \"dialog-config-flow\" */ \"./dialog-data-entry-flow\"\n  );\n\nexport const showFlowDialog = (\n  element: HTMLElement,\n  dialogParams: Omit<DataEntryFlowDialogParams, \"flowConfig\">,\n  flowConfig: FlowConfig\n): void => {\n  fireEvent(element, \"show-dialog\", {\n    dialogTag: \"dialog-data-entry-flow\",\n    dialogImport: loadDataEntryFlowDialog,\n    dialogParams: {\n      ...dialogParams,\n      flowConfig,\n    },\n  });\n};\n","import {\n  getConfigFlowHandlers,\n  fetchConfigFlow,\n  handleConfigFlowStep,\n  deleteConfigFlow,\n  createConfigFlow,\n} from \"../../data/config_flow\";\nimport { html } from \"lit-element\";\nimport { localizeKey } from \"../../common/translations/localize\";\nimport {\n  showFlowDialog,\n  DataEntryFlowDialogParams,\n  loadDataEntryFlowDialog,\n} from \"./show-dialog-data-entry-flow\";\nimport { caseInsensitiveCompare } from \"../../common/string/compare\";\n\nexport const loadConfigFlowDialog = loadDataEntryFlowDialog;\n\nexport const showConfigFlowDialog = (\n  element: HTMLElement,\n  dialogParams: Omit<DataEntryFlowDialogParams, \"flowConfig\">\n): void =>\n  showFlowDialog(element, dialogParams, {\n    loadDevicesAndAreas: true,\n    getFlowHandlers: (hass) =>\n      getConfigFlowHandlers(hass).then((handlers) =>\n        handlers.sort((handlerA, handlerB) =>\n          caseInsensitiveCompare(\n            hass.localize(`component.${handlerA}.config.title`),\n            hass.localize(`component.${handlerB}.config.title`)\n          )\n        )\n      ),\n    createFlow: createConfigFlow,\n    fetchFlow: fetchConfigFlow,\n    handleFlowStep: handleConfigFlowStep,\n    deleteFlow: deleteConfigFlow,\n\n    renderAbortDescription(hass, step) {\n      const description = localizeKey(\n        hass.localize,\n        `component.${step.handler}.config.abort.${step.reason}`,\n        step.description_placeholders\n      );\n\n      return description\n        ? html`\n            <ha-markdown allowsvg .content=${description}></ha-markdown>\n          `\n        : \"\";\n    },\n\n    renderShowFormStepHeader(hass, step) {\n      return hass.localize(\n        `component.${step.handler}.config.step.${step.step_id}.title`\n      );\n    },\n\n    renderShowFormStepDescription(hass, step) {\n      const description = localizeKey(\n        hass.localize,\n        `component.${step.handler}.config.step.${step.step_id}.description`,\n        step.description_placeholders\n      );\n      return description\n        ? html`\n            <ha-markdown allowsvg .content=${description}></ha-markdown>\n          `\n        : \"\";\n    },\n\n    renderShowFormStepFieldLabel(hass, step, field) {\n      return hass.localize(\n        `component.${step.handler}.config.step.${step.step_id}.data.${\n          field.name\n        }`\n      );\n    },\n\n    renderShowFormStepFieldError(hass, step, error) {\n      return hass.localize(`component.${step.handler}.config.error.${error}`);\n    },\n\n    renderExternalStepHeader(hass, step) {\n      return hass.localize(\n        `component.${step.handler}.config.step.${step.step_id}.title`\n      );\n    },\n\n    renderExternalStepDescription(hass, step) {\n      const description = localizeKey(\n        hass.localize,\n        `component.${step.handler}.config.${step.step_id}.description`,\n        step.description_placeholders\n      );\n\n      return html`\n        <p>\n          ${hass.localize(\n            \"ui.panel.config.integrations.config_flow.external_step.description\"\n          )}\n        </p>\n        ${description\n          ? html`\n              <ha-markdown allowsvg .content=${description}></ha-markdown>\n            `\n          : \"\"}\n      `;\n    },\n\n    renderCreateEntryDescription(hass, step) {\n      const description = localizeKey(\n        hass.localize,\n        `component.${step.handler}.config.create_entry.${step.description ||\n          \"default\"}`,\n        step.description_placeholders\n      );\n\n      return html`\n        ${description\n          ? html`\n              <ha-markdown allowsvg .content=${description}></ha-markdown>\n            `\n          : \"\"}\n        <p>\n          ${hass.localize(\n            \"ui.panel.config.integrations.config_flow.created_config\",\n            \"name\",\n            step.title\n          )}\n        </p>\n      `;\n    },\n  });\n","import { showConfigFlowDialog } from \"../../../dialogs/config-flow/show-dialog-config-flow\";\n\nclass FilesCard extends HTMLElement {\n  constructor() {\n    super();\n    this.attachShadow({ mode: \"open\" });\n  }\n\n  setConfig(config) {\n    if (!config.entity) {\n      throw new Error(\"Please define an entity\");\n    }\n\n    const root = this.shadowRoot;\n    if (root.lastChild) root.removeChild(root.lastChild);\n\n    const cardConfig = config;\n    const card = document.createElement(\"ha-card\");\n    const content = document.createElement(\"div\");\n    const style = document.createElement(\"style\");\n    style.textContent = `\n            tr{\n              height: 3em;\n            }\n            table {\n              width: 100%;\n              padding: 0 16px 16px 16px;\n              border-spacing: 0px;\n              table-layout: fixed;\n              overflow-wrap: break-word;\n            }\n            tr.fileRow:hover td{\n              background-color:#ffc9471f;\n              cursor: pointer;\n            }\n            tr th{\n              text-align: left;\n              font-weight: normal;\n            }\n            ha-icon {\n              display: flex;\n              width: auto;\n            }\n            tr.fileSelected td{\n              background-color:#ffc94773 !important;\n            }\n            tr.fileClicked td{\n              background-color:#ff9800eb !important;\n              cursor: wait !important;\n            }\n          `;\n\n    content.id = \"container\";\n    card.header = cardConfig.title;\n    card.appendChild(content);\n    card.appendChild(style);\n    root.appendChild(card);\n    this._config = cardConfig;\n  }\n\n  set hass(hass) {\n    const config = this._config;\n    const root = this.shadowRoot;\n\n    if (hass.states[config.entity]) {\n      const feed = hass.states[config.entity].attributes.files;\n      const path = hass.states[config.entity].state;\n      this.style.display = \"block\";\n      const rowLimit = config.row_limit\n        ? config.row_limit\n        : Object.keys(feed).length;\n      let rows = 0;\n\n      if (feed !== undefined && Object.keys(feed).length > 0) {\n        let iconHome;\n        if (path.length > 0) {\n          iconHome = '<ha-icon icon=\"mdi:home\"></ha-icon>';\n        } else {\n          iconHome = \"\";\n        }\n        let cardContent =\n          '<table><tr style=\"height:0px\"><th width=\"10%\">' +\n          iconHome +\n          '</th><th width=\"80%\">' +\n          path +\n          '</th><th width=\"10%\"></th></tr><tbody>';\n        let iconStatus = \"\";\n        let classStatus = \"\";\n        for (var i = 0; i < feed.length; i++) {\n          if (rows >= rowLimit) break;\n          if (path.length > 0 && feed[i].path.endsWith(path)) {\n            iconStatus = '<ha-icon icon=\"mdi:play\"></ha-icon>';\n            classStatus = \"fileSelected\";\n          } else {\n            iconStatus = \"\";\n            classStatus = \"\";\n          }\n          cardContent +=\n            `<tr class=\"fileRow ` +\n            classStatus +\n            `\" data-path=\"${feed[i].path}\">`;\n          cardContent += `<td><ha-icon icon=\"mdi:${feed[i].icon}\"></ha-icon></td>`;\n          cardContent += `<td>${feed[i].name}</td>`;\n          cardContent += `<td>` + iconStatus + `</td>`;\n          cardContent += `</tr>`;\n          ++rows;\n        }\n\n        // add new remote\n        if (path === \"/dyski-zdalne\") {\n          cardContent += `<tr style=\"height:1em\">`;\n          cardContent += `<td colspan=\"3\" style=\"text-align:right;\"><mwc-button id=\"addNewDrive\" style=\"float:right\">+ DYSK ZDALNY</mwc-button></td>`;\n          cardContent += `</tr>`;\n        }\n        root.lastChild.hass = hass;\n        cardContent += `</tbody></table>`;\n\n        root.getElementById(\"container\").innerHTML = cardContent;\n      } else {\n        this.style.display = \"none\";\n      }\n    } else {\n      this.style.display = \"none\";\n    }\n\n    //\n    const files = root.querySelectorAll(\"tr.fileRow\");\n    // const container = root.querySelector('#container');\n    const waitIcon = document.createElement(\"ha-icon\");\n    waitIcon.setAttribute(\"icon\", \"mdi:progress-download\");\n    files.forEach((file) => {\n      file.addEventListener(\"click\", () => {\n        file.classList.add(\"fileSelected\", \"fileClicked\");\n        file.querySelector(\"td:last-child\").appendChild(waitIcon);\n        hass.callService(\"ais_drives_service\", \"browse_path\", {\n          path: file.getAttribute(\"data-path\"),\n        });\n      });\n    });\n\n    function continueFlow(flowId) {\n      showConfigFlowDialog(document.querySelector(\"home-assistant\"), {\n        continueFlowId: flowId,\n        dialogClosedCallback: () => {},\n      });\n    }\n\n    const addNewDrive = root.getElementById(\"addNewDrive\");\n    if (addNewDrive !== null) {\n      addNewDrive.addEventListener(\"click\", function() {\n        hass\n          .callApi(\"POST\", \"config/config_entries/flow\", {\n            handler: \"ais_drives_service\",\n          })\n          .then((result) => {\n            continueFlow(result.flow_id);\n          });\n      });\n    }\n  }\n\n  getCardSize() {\n    return 4;\n  }\n}\n\ncustomElements.define(\"hui-ais-files-list-card\", FilesCard);\n"],"sourceRoot":""}