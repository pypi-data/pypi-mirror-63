{"version":3,"sources":["webpack:///./src/common/entity/compute_state_name.ts","webpack:///./src/common/entity/domain_icon.ts","webpack:///./src/common/entity/compute_object_id.ts","webpack:///./src/common/entity/sensor_icon.ts","webpack:///./src/common/entity/state_icon.ts","webpack:///./src/common/entity/binary_sensor_icon.ts","webpack:///./src/common/entity/cover_icon.ts","webpack:///./src/common/entity/input_dateteime_icon.ts","webpack:///./src/common/string/compare.ts","webpack:///./src/common/entity/entity_filter.ts","webpack:///./src/dialogs/domain-toggler/show-dialog-domain-toggler.ts","webpack:///./src/panels/config/cloud/alexa/cloud-alexa.ts"],"names":["__webpack_require__","d","__webpack_exports__","computeStateName","_compute_object_id__WEBPACK_IMPORTED_MODULE_0__","stateObj","undefined","attributes","friendly_name","computeObjectId","entity_id","replace","domainIcon","_const__WEBPACK_IMPORTED_MODULE_0__","fixedIcons","alert","alexa","automation","calendar","camera","climate","configurator","conversation","counter","device_tracker","fan","google_assistant","group","history_graph","homeassistant","homekit","image_processing","input_boolean","input_datetime","input_number","input_select","input_text","light","mailbox","notify","persistent_notification","person","plant","proximity","remote","scene","script","sensor","simple_alarm","sun","switch","timer","updater","vacuum","water_heater","weather","weblink","zone","domain","state","console","warn","DEFAULT_DOMAIN_ICON","entityId","substr","indexOf","fixedDeviceClassIcons","humidity","illuminance","temperature","pressure","power","signal_strength","state_icon_stateIcon","domainIcons","binary_sensor","activated","device_class","cover","open","dclass","battery","Number","isNaN","batteryRound","Math","round","concat","unit","unit_of_measurement","UNIT_C","UNIT_F","has_date","has_time","stateIcon","icon","computeDomain","compare","caseInsensitiveCompare","a","b","toLowerCase","isEmptyFilter","generateFilter","_compute_domain__WEBPACK_IMPORTED_MODULE_0__","filter","include_domains","length","include_entities","exclude_domains","exclude_entities","includeDomains","includeEntities","excludeDomains","excludeEntities","includeDomainsSet","Set","includeEntitiesSet","excludeDomainsSet","excludeEntitiesSet","haveInclude","size","haveExclude","has","showDomainTogglerDialog","_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__","loadDomainTogglerDialog","Promise","all","e","then","bind","element","dialogParams","fireEvent","dialogTag","dialogImport","IGNORE_INTERFACES","configIsExposed","config","should_expose","customElement","CloudAlexa","property","type","Boolean","memoizeOne","_this2","this","_entities","html","_templateObject","emptyFilter","cloudStatus","alexa_entities","filterFunc","_getEntityFilterFunc","showInExposed","_isInitialExposed","trackExposed","selected","exposedCards","notExposedCards","forEach","entity","hass","states","_entityConfigs","isExposed","add","push","_templateObject2","_showMoreInfo","interfaces","ifc","includes","map","join","_exposeChanged","localize","_templateObject3","narrow","_templateObject4","_templateObject5","_openDomainToggler","_templateObject6","_templateObject7","_templateObject8","changedProps","_get","_getPrototypeOf","prototype","call","_fetchData","prefs","alexa_entity_configs","_callee","entities","_this3","regeneratorRuntime","wrap","_context","prev","next","fetchCloudAlexaEntities","sent","sort","stateA","stateB","stop","ev","currentTarget","_callee2","newExposed","_context2","target","checked","_updateExposed","_callee3","curExposed","_context3","abrupt","_updateConfig","_ensureEntitySync","_callee4","values","updatedConfig","_context4","updateCloudAlexaEntityConfig","Object","assign","_ensureStatusReload","_this4","domains","value","idx","self","toggleDomain","turnOn","_popstateReloadStatusAttached","parent","parentElement","window","addEventListener","once","_popstateSyncAttached","css","_templateObject9","LitElement"],"mappings":"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","file":"chunk.3feeb2efd50e7b630641.js","sourcesContent":["import { HassEntity } from \"home-assistant-js-websocket\";\nimport { computeObjectId } from \"./compute_object_id\";\n\nexport const computeStateName = (stateObj: HassEntity): string => {\n  return stateObj.attributes.friendly_name === undefined\n    ? computeObjectId(stateObj.entity_id).replace(/_/g, \" \")\n    : stateObj.attributes.friendly_name || \"\";\n};\n","/**\n * Return the icon to be used for a domain.\n *\n * Optionally pass in a state to influence the domain icon.\n */\nimport { DEFAULT_DOMAIN_ICON } from \"../const\";\n\nconst fixedIcons = {\n  alert: \"hass:alert\",\n  alexa: \"hass:amazon-alexa\",\n  automation: \"hass:robot\",\n  calendar: \"hass:calendar\",\n  camera: \"hass:video\",\n  climate: \"hass:thermostat\",\n  configurator: \"hass:settings\",\n  conversation: \"hass:text-to-speech\",\n  counter: \"hass:counter\",\n  device_tracker: \"hass:account\",\n  fan: \"hass:fan\",\n  google_assistant: \"hass:google-assistant\",\n  group: \"hass:google-circles-communities\",\n  history_graph: \"hass:chart-line\",\n  homeassistant: \"hass:home-assistant\",\n  homekit: \"hass:home-automation\",\n  image_processing: \"hass:image-filter-frames\",\n  input_boolean: \"hass:drawing\",\n  input_datetime: \"hass:calendar-clock\",\n  input_number: \"hass:ray-vertex\",\n  input_select: \"hass:format-list-bulleted\",\n  input_text: \"hass:textbox\",\n  light: \"hass:lightbulb\",\n  mailbox: \"hass:mailbox\",\n  notify: \"hass:comment-alert\",\n  persistent_notification: \"hass:bell\",\n  person: \"hass:account\",\n  plant: \"hass:flower\",\n  proximity: \"hass:apple-safari\",\n  remote: \"hass:remote\",\n  scene: \"hass:palette\",\n  script: \"hass:script-text\",\n  sensor: \"hass:eye\",\n  simple_alarm: \"hass:bell\",\n  sun: \"hass:white-balance-sunny\",\n  switch: \"hass:flash\",\n  timer: \"hass:timer\",\n  updater: \"hass:cloud-upload\",\n  vacuum: \"hass:robot-vacuum\",\n  water_heater: \"hass:thermometer\",\n  weather: \"hass:weather-cloudy\",\n  weblink: \"hass:open-in-new\",\n  zone: \"hass:map-marker-radius\",\n};\n\nexport const domainIcon = (domain: string, state?: string): string => {\n  if (domain in fixedIcons) {\n    return fixedIcons[domain];\n  }\n\n  switch (domain) {\n    case \"alarm_control_panel\":\n      switch (state) {\n        case \"armed_home\":\n          return \"hass:bell-plus\";\n        case \"armed_night\":\n          return \"hass:bell-sleep\";\n        case \"disarmed\":\n          return \"hass:bell-outline\";\n        case \"triggered\":\n          return \"hass:bell-ring\";\n        default:\n          return \"hass:bell\";\n      }\n\n    case \"binary_sensor\":\n      return state && state === \"off\"\n        ? \"hass:radiobox-blank\"\n        : \"hass:checkbox-marked-circle\";\n\n    case \"cover\":\n      return state === \"closed\" ? \"hass:window-closed\" : \"hass:window-open\";\n\n    case \"lock\":\n      return state && state === \"unlocked\" ? \"hass:lock-open\" : \"hass:lock\";\n\n    case \"media_player\":\n      return state && state !== \"off\" && state !== \"idle\"\n        ? \"hass:cast-connected\"\n        : \"hass:cast\";\n\n    case \"zwave\":\n      switch (state) {\n        case \"dead\":\n          return \"hass:emoticon-dead\";\n        case \"sleeping\":\n          return \"hass:sleep\";\n        case \"initializing\":\n          return \"hass:timer-sand\";\n        default:\n          return \"hass:z-wave\";\n      }\n\n    default:\n      // tslint:disable-next-line\n      console.warn(\n        \"Unable to find icon for domain \" + domain + \" (\" + state + \")\"\n      );\n      return DEFAULT_DOMAIN_ICON;\n  }\n};\n","/** Compute the object ID of a state. */\nexport const computeObjectId = (entityId: string): string => {\n  return entityId.substr(entityId.indexOf(\".\") + 1);\n};\n","/** Return an icon representing a sensor state. */\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { UNIT_C, UNIT_F } from \"../const\";\nimport { domainIcon } from \"./domain_icon\";\n\nconst fixedDeviceClassIcons = {\n  humidity: \"hass:water-percent\",\n  illuminance: \"hass:brightness-5\",\n  temperature: \"hass:thermometer\",\n  pressure: \"hass:gauge\",\n  power: \"hass:flash\",\n  signal_strength: \"hass:wifi\",\n};\n\nexport const sensorIcon = (state: HassEntity) => {\n  const dclass = state.attributes.device_class;\n\n  if (dclass && dclass in fixedDeviceClassIcons) {\n    return fixedDeviceClassIcons[dclass];\n  }\n  if (dclass === \"battery\") {\n    const battery = Number(state.state);\n    if (isNaN(battery)) {\n      return \"hass:battery-unknown\";\n    }\n    const batteryRound = Math.round(battery / 10) * 10;\n    if (batteryRound >= 100) {\n      return \"hass:battery\";\n    }\n    if (batteryRound <= 0) {\n      return \"hass:battery-alert\";\n    }\n    // Will return one of the following icons: (listed so extractor picks up)\n    // hass:battery-10\n    // hass:battery-20\n    // hass:battery-30\n    // hass:battery-40\n    // hass:battery-50\n    // hass:battery-60\n    // hass:battery-70\n    // hass:battery-80\n    // hass:battery-90\n    // We obscure 'hass' in iconname so this name does not get picked up\n    return `${\"hass\"}:battery-${batteryRound}`;\n  }\n\n  const unit = state.attributes.unit_of_measurement;\n  if (unit === UNIT_C || unit === UNIT_F) {\n    return \"hass:thermometer\";\n  }\n  return domainIcon(\"sensor\");\n};\n","/** Return an icon representing a state. */\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { DEFAULT_DOMAIN_ICON } from \"../const\";\nimport { binarySensorIcon } from \"./binary_sensor_icon\";\n\nimport { computeDomain } from \"./compute_domain\";\nimport { domainIcon } from \"./domain_icon\";\nimport { coverIcon } from \"./cover_icon\";\nimport { sensorIcon } from \"./sensor_icon\";\nimport { inputDateTimeIcon } from \"./input_dateteime_icon\";\n\nconst domainIcons = {\n  binary_sensor: binarySensorIcon,\n  cover: coverIcon,\n  sensor: sensorIcon,\n  input_datetime: inputDateTimeIcon,\n};\n\nexport const stateIcon = (state: HassEntity) => {\n  if (!state) {\n    return DEFAULT_DOMAIN_ICON;\n  }\n  if (state.attributes.icon) {\n    return state.attributes.icon;\n  }\n\n  const domain = computeDomain(state.entity_id);\n\n  if (domain in domainIcons) {\n    return domainIcons[domain](state);\n  }\n  return domainIcon(domain, state.state);\n};\n","import { HassEntity } from \"home-assistant-js-websocket\";\n\n/** Return an icon representing a binary sensor state. */\n\nexport const binarySensorIcon = (state: HassEntity) => {\n  const activated = state.state && state.state === \"off\";\n  switch (state.attributes.device_class) {\n    case \"battery\":\n      return activated ? \"hass:battery\" : \"hass:battery-outline\";\n    case \"cold\":\n      return activated ? \"hass:thermometer\" : \"hass:snowflake\";\n    case \"connectivity\":\n      return activated ? \"hass:server-network-off\" : \"hass:server-network\";\n    case \"door\":\n      return activated ? \"hass:door-closed\" : \"hass:door-open\";\n    case \"garage_door\":\n      return activated ? \"hass:garage\" : \"hass:garage-open\";\n    case \"gas\":\n    case \"power\":\n    case \"problem\":\n    case \"safety\":\n    case \"smoke\":\n      return activated ? \"hass:shield-check\" : \"hass:alert\";\n    case \"heat\":\n      return activated ? \"hass:thermometer\" : \"hass:fire\";\n    case \"light\":\n      return activated ? \"hass:brightness-5\" : \"hass:brightness-7\";\n    case \"lock\":\n      return activated ? \"hass:lock\" : \"hass:lock-open\";\n    case \"moisture\":\n      return activated ? \"hass:water-off\" : \"hass:water\";\n    case \"motion\":\n      return activated ? \"hass:walk\" : \"hass:run\";\n    case \"occupancy\":\n      return activated ? \"hass:home-outline\" : \"hass:home\";\n    case \"opening\":\n      return activated ? \"hass:square\" : \"hass:square-outline\";\n    case \"plug\":\n      return activated ? \"hass:power-plug-off\" : \"hass:power-plug\";\n    case \"presence\":\n      return activated ? \"hass:home-outline\" : \"hass:home\";\n    case \"sound\":\n      return activated ? \"hass:music-note-off\" : \"hass:music-note\";\n    case \"vibration\":\n      return activated ? \"hass:crop-portrait\" : \"hass:vibrate\";\n    case \"window\":\n      return activated ? \"hass:window-closed\" : \"hass:window-open\";\n    default:\n      return activated ? \"hass:radiobox-blank\" : \"hass:checkbox-marked-circle\";\n  }\n};\n","/** Return an icon representing a cover state. */\nimport { HassEntity } from \"home-assistant-js-websocket\";\nimport { domainIcon } from \"./domain_icon\";\n\nexport const coverIcon = (state: HassEntity): string => {\n  const open = state.state !== \"closed\";\n  switch (state.attributes.device_class) {\n    case \"garage\":\n      return open ? \"hass:garage-open\" : \"hass:garage\";\n    case \"door\":\n      return open ? \"hass:door-open\" : \"hass:door-closed\";\n    case \"shutter\":\n      return open ? \"hass:window-shutter-open\" : \"hass:window-shutter\";\n    case \"blind\":\n      return open ? \"hass:blinds-open\" : \"hass:blinds\";\n    case \"window\":\n      return open ? \"hass:window-open\" : \"hass:window-closed\";\n    default:\n      return domainIcon(\"cover\", state.state);\n  }\n};\n","/** Return an icon representing an input datetime state. */\nimport { domainIcon } from \"./domain_icon\";\nimport { HassEntity } from \"home-assistant-js-websocket\";\n\nexport const inputDateTimeIcon = (state: HassEntity): string => {\n  if (!state.attributes.has_date) {\n    return \"hass:clock\";\n  }\n  if (!state.attributes.has_time) {\n    return \"hass:calendar\";\n  }\n  return domainIcon(\"input_datetime\");\n};\n","export const compare = (a: string, b: string) => {\n  if (a < b) {\n    return -1;\n  }\n  if (a > b) {\n    return 1;\n  }\n\n  return 0;\n};\n\nexport const caseInsensitiveCompare = (a: string, b: string) =>\n  compare(a.toLowerCase(), b.toLowerCase());\n","import { computeDomain } from \"./compute_domain\";\n\nexport type FilterFunc = (entityId: string) => boolean;\n\nexport interface EntityFilter {\n  include_domains: string[];\n  include_entities: string[];\n  exclude_domains: string[];\n  exclude_entities: string[];\n}\n\nexport const isEmptyFilter = (filter: EntityFilter) =>\n  filter.include_domains.length +\n    filter.include_entities.length +\n    filter.exclude_domains.length +\n    filter.exclude_entities.length ===\n  0;\n\nexport const generateFilter = (\n  includeDomains?: string[],\n  includeEntities?: string[],\n  excludeDomains?: string[],\n  excludeEntities?: string[]\n): FilterFunc => {\n  const includeDomainsSet = new Set(includeDomains);\n  const includeEntitiesSet = new Set(includeEntities);\n  const excludeDomainsSet = new Set(excludeDomains);\n  const excludeEntitiesSet = new Set(excludeEntities);\n\n  const haveInclude = includeDomainsSet.size > 0 || includeEntitiesSet.size > 0;\n  const haveExclude = excludeDomainsSet.size > 0 || excludeEntitiesSet.size > 0;\n\n  // Case 1 - no includes or excludes - pass all entities\n  if (!haveInclude && !haveExclude) {\n    return () => true;\n  }\n\n  // Case 2 - includes, no excludes - only include specified entities\n  if (haveInclude && !haveExclude) {\n    return (entityId) =>\n      includeEntitiesSet.has(entityId) ||\n      includeDomainsSet.has(computeDomain(entityId));\n  }\n\n  // Case 3 - excludes, no includes - only exclude specified entities\n  if (!haveInclude && haveExclude) {\n    return (entityId) =>\n      !excludeEntitiesSet.has(entityId) &&\n      !excludeDomainsSet.has(computeDomain(entityId));\n  }\n\n  // Case 4 - both includes and excludes specified\n  // Case 4a - include domain specified\n  //  - if domain is included, pass if entity not excluded\n  //  - if domain is not included, pass if entity is included\n  // note: if both include and exclude domains specified,\n  //   the exclude domains are ignored\n  if (includeDomainsSet.size) {\n    return (entityId) =>\n      includeDomainsSet.has(computeDomain(entityId))\n        ? !excludeEntitiesSet.has(entityId)\n        : includeEntitiesSet.has(entityId);\n  }\n\n  // Case 4b - exclude domain specified\n  //  - if domain is excluded, pass if entity is included\n  //  - if domain is not excluded, pass if entity not excluded\n  if (excludeDomainsSet.size) {\n    return (entityId) =>\n      excludeDomainsSet.has(computeDomain(entityId))\n        ? includeEntitiesSet.has(entityId)\n        : !excludeEntitiesSet.has(entityId);\n  }\n\n  // Case 4c - neither include or exclude domain specified\n  //  - Only pass if entity is included.  Ignore entity excludes.\n  return (entityId) => includeEntitiesSet.has(entityId);\n};\n","import { fireEvent } from \"../../common/dom/fire_event\";\n\nexport interface HaDomainTogglerDialogParams {\n  domains: string[];\n  toggleDomain: (domain: string, turnOn: boolean) => void;\n}\n\nexport const loadDomainTogglerDialog = () =>\n  import(/* webpackChunkName: \"dialog-domain-toggler\" */ \"./dialog-domain-toggler\");\n\nexport const showDomainTogglerDialog = (\n  element: HTMLElement,\n  dialogParams: HaDomainTogglerDialogParams\n): void => {\n  fireEvent(element, \"show-dialog\", {\n    dialogTag: \"dialog-domain-toggler\",\n    dialogImport: loadDomainTogglerDialog,\n    dialogParams,\n  });\n};\n","import {\n  LitElement,\n  TemplateResult,\n  html,\n  CSSResult,\n  css,\n  customElement,\n  property,\n} from \"lit-element\";\nimport \"@polymer/paper-icon-button\";\nimport memoizeOne from \"memoize-one\";\n\nimport \"../../../../layouts/hass-subpage\";\nimport \"../../../../layouts/hass-loading-screen\";\nimport \"../../../../components/ha-card\";\nimport \"../../../../components/ha-switch\";\nimport \"../../../../components/entity/state-info\";\n\nimport { HomeAssistant } from \"../../../../types\";\nimport {\n  CloudStatusLoggedIn,\n  CloudPreferences,\n  updateCloudAlexaEntityConfig,\n  AlexaEntityConfig,\n} from \"../../../../data/cloud\";\nimport {\n  generateFilter,\n  isEmptyFilter,\n  EntityFilter,\n} from \"../../../../common/entity/entity_filter\";\nimport { compare } from \"../../../../common/string/compare\";\nimport { fireEvent } from \"../../../../common/dom/fire_event\";\nimport { showDomainTogglerDialog } from \"../../../../dialogs/domain-toggler/show-dialog-domain-toggler\";\nimport { AlexaEntity, fetchCloudAlexaEntities } from \"../../../../data/alexa\";\n// tslint:disable-next-line: no-duplicate-imports\nimport { HaSwitch } from \"../../../../components/ha-switch\";\n\nimport { computeStateName } from \"../../../../common/entity/compute_state_name\";\nimport { computeDomain } from \"../../../../common/entity/compute_domain\";\n\nconst DEFAULT_CONFIG_EXPOSE = true;\nconst IGNORE_INTERFACES = [\"Alexa.EndpointHealth\"];\n\nconst configIsExposed = (config: AlexaEntityConfig) =>\n  config.should_expose === undefined\n    ? DEFAULT_CONFIG_EXPOSE\n    : config.should_expose;\n\n@customElement(\"cloud-alexa\")\nclass CloudAlexa extends LitElement {\n  @property() public hass!: HomeAssistant;\n\n  @property()\n  public cloudStatus!: CloudStatusLoggedIn;\n\n  @property({ type: Boolean }) public narrow!: boolean;\n\n  @property() private _entities?: AlexaEntity[];\n\n  @property()\n  private _entityConfigs: CloudPreferences[\"alexa_entity_configs\"] = {};\n  private _popstateSyncAttached = false;\n  private _popstateReloadStatusAttached = false;\n  private _isInitialExposed?: Set<string>;\n\n  private _getEntityFilterFunc = memoizeOne((filter: EntityFilter) =>\n    generateFilter(\n      filter.include_domains,\n      filter.include_entities,\n      filter.exclude_domains,\n      filter.exclude_entities\n    )\n  );\n\n  protected render(): TemplateResult {\n    if (this._entities === undefined) {\n      return html`\n        <hass-loading-screen></hass-loading-screen>\n      `;\n    }\n    const emptyFilter = isEmptyFilter(this.cloudStatus.alexa_entities);\n    const filterFunc = this._getEntityFilterFunc(\n      this.cloudStatus.alexa_entities\n    );\n\n    // We will only generate `isInitialExposed` during first render.\n    // On each subsequent render we will use the same set so that cards\n    // will not jump around when we change the exposed setting.\n    const showInExposed = this._isInitialExposed || new Set();\n    const trackExposed = this._isInitialExposed === undefined;\n\n    let selected = 0;\n\n    // On first render we decide which cards show in which category.\n    // That way cards won't jump around when changing values.\n    const exposedCards: TemplateResult[] = [];\n    const notExposedCards: TemplateResult[] = [];\n\n    this._entities.forEach((entity) => {\n      const stateObj = this.hass.states[entity.entity_id];\n      const config = this._entityConfigs[entity.entity_id] || {};\n      const isExposed = emptyFilter\n        ? configIsExposed(config)\n        : filterFunc(entity.entity_id);\n      if (isExposed) {\n        selected++;\n\n        if (trackExposed) {\n          showInExposed.add(entity.entity_id);\n        }\n      }\n\n      const target = showInExposed.has(entity.entity_id)\n        ? exposedCards\n        : notExposedCards;\n\n      target.push(html`\n        <ha-card>\n          <div class=\"card-content\">\n            <state-info\n              .hass=${this.hass}\n              .stateObj=${stateObj}\n              secondary-line\n              @click=${this._showMoreInfo}\n            >\n              ${entity.interfaces\n                .filter((ifc) => !IGNORE_INTERFACES.includes(ifc))\n                .map((ifc) =>\n                  ifc.replace(\"Alexa.\", \"\").replace(\"Controller\", \"\")\n                )\n                .join(\", \")}\n            </state-info>\n            <ha-switch\n              .entityId=${entity.entity_id}\n              .disabled=${!emptyFilter}\n              .checked=${isExposed}\n              @change=${this._exposeChanged}\n            >\n              ${this.hass!.localize(\"ui.panel.config.cloud.alexa.expose\")}\n            </ha-switch>\n          </div>\n        </ha-card>\n      `);\n    });\n\n    if (trackExposed) {\n      this._isInitialExposed = showInExposed;\n    }\n\n    return html`\n      <hass-subpage header=\"${this.hass!.localize(\n        \"ui.panel.config.cloud.alexa.title\"\n      )}\">\n        <span slot=\"toolbar-icon\">\n          ${selected}${\n      !this.narrow\n        ? html`\n            selected\n          `\n        : \"\"\n    }\n        </span>\n        ${\n          emptyFilter\n            ? html`\n                <paper-icon-button\n                  slot=\"toolbar-icon\"\n                  icon=\"hass:tune\"\n                  @click=${this._openDomainToggler}\n                ></paper-icon-button>\n              `\n            : \"\"\n        }\n        ${\n          !emptyFilter\n            ? html`\n                <div class=\"banner\">\n                  ${this.hass!.localize(\"ui.panel.config.cloud.alexa.banner\")}\n                </div>\n              `\n            : \"\"\n        }\n          ${\n            exposedCards.length > 0\n              ? html`\n                  <h1>\n                    ${this.hass!.localize(\n                      \"ui.panel.config.cloud.alexa.exposed_entities\"\n                    )}\n                  </h1>\n                  <div class=\"content\">${exposedCards}</div>\n                `\n              : \"\"\n          }\n          ${\n            notExposedCards.length > 0\n              ? html`\n                  <h1>\n                    ${this.hass!.localize(\n                      \"ui.panel.config.cloud.alexa.not_exposed_entities\"\n                    )}\n                  </h1>\n                  <div class=\"content\">${notExposedCards}</div>\n                `\n              : \"\"\n          }\n        </div>\n      </hass-subpage>\n    `;\n  }\n\n  protected firstUpdated(changedProps) {\n    super.firstUpdated(changedProps);\n    this._fetchData();\n  }\n\n  protected updated(changedProps) {\n    super.updated(changedProps);\n    if (changedProps.has(\"cloudStatus\")) {\n      this._entityConfigs = this.cloudStatus.prefs.alexa_entity_configs;\n    }\n  }\n\n  private async _fetchData() {\n    const entities = await fetchCloudAlexaEntities(this.hass);\n    entities.sort((a, b) => {\n      const stateA = this.hass.states[a.entity_id];\n      const stateB = this.hass.states[b.entity_id];\n      return compare(\n        stateA ? computeStateName(stateA) : a.entity_id,\n        stateB ? computeStateName(stateB) : b.entity_id\n      );\n    });\n    this._entities = entities;\n  }\n\n  private _showMoreInfo(ev) {\n    const entityId = ev.currentTarget.stateObj.entity_id;\n    fireEvent(this, \"hass-more-info\", { entityId });\n  }\n\n  private async _exposeChanged(ev: Event) {\n    const entityId = (ev.currentTarget as any).entityId;\n    const newExposed = (ev.target as HaSwitch).checked;\n    await this._updateExposed(entityId, newExposed);\n  }\n\n  private async _updateExposed(entityId: string, newExposed: boolean) {\n    const curExposed = configIsExposed(this._entityConfigs[entityId] || {});\n    if (newExposed === curExposed) {\n      return;\n    }\n    await this._updateConfig(entityId, {\n      should_expose: newExposed,\n    });\n    this._ensureEntitySync();\n  }\n\n  private async _updateConfig(entityId: string, values: AlexaEntityConfig) {\n    const updatedConfig = await updateCloudAlexaEntityConfig(\n      this.hass,\n      entityId,\n      values\n    );\n    this._entityConfigs = {\n      ...this._entityConfigs,\n      [entityId]: updatedConfig,\n    };\n    this._ensureStatusReload();\n  }\n\n  private _openDomainToggler() {\n    showDomainTogglerDialog(this, {\n      domains: this._entities!.map((entity) =>\n        computeDomain(entity.entity_id)\n      ).filter((value, idx, self) => self.indexOf(value) === idx),\n      toggleDomain: (domain, turnOn) => {\n        this._entities!.forEach((entity) => {\n          if (computeDomain(entity.entity_id) === domain) {\n            this._updateExposed(entity.entity_id, turnOn);\n          }\n        });\n      },\n    });\n  }\n\n  private _ensureStatusReload() {\n    if (this._popstateReloadStatusAttached) {\n      return;\n    }\n    this._popstateReloadStatusAttached = true;\n    // Cache parent because by the time popstate happens,\n    // this element is detached\n    const parent = this.parentElement!;\n    window.addEventListener(\n      \"popstate\",\n      () => fireEvent(parent, \"ha-refresh-cloud-status\"),\n      { once: true }\n    );\n  }\n\n  private _ensureEntitySync() {\n    if (this._popstateSyncAttached) {\n      return;\n    }\n    this._popstateSyncAttached = true;\n    // Cache parent because by the time popstate happens,\n    // this element is detached\n    // const parent = this.parentElement!;\n    window.addEventListener(\n      \"popstate\",\n      () => {\n        // We don't have anything yet.\n        // showToast(parent, { message: \"Synchronizing changes to Google.\" });\n        // cloudSyncGoogleAssistant(this.hass);\n      },\n      { once: true }\n    );\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      .banner {\n        color: var(--primary-text-color);\n        background-color: var(\n          --ha-card-background,\n          var(--paper-card-background-color, white)\n        );\n        padding: 16px 8px;\n        text-align: center;\n      }\n      h1 {\n        color: var(--primary-text-color);\n        font-size: 24px;\n        letter-spacing: -0.012em;\n        margin-bottom: 0;\n        padding: 0 8px;\n      }\n      .content {\n        display: grid;\n        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n        grid-gap: 8px 8px;\n        padding: 8px;\n      }\n      ha-switch {\n        clear: both;\n      }\n      .card-content {\n        padding-bottom: 12px;\n      }\n      state-info {\n        cursor: pointer;\n      }\n      ha-switch {\n        padding: 8px 0;\n      }\n\n      @media all and (max-width: 450px) {\n        ha-card {\n          max-width: 100%;\n        }\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"cloud-alexa\": CloudAlexa;\n  }\n}\n"],"sourceRoot":""}