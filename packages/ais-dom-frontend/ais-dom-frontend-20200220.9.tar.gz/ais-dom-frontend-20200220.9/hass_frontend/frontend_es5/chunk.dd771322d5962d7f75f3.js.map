{"version":3,"sources":["webpack:///./src/dialogs/generic/show-dialog-box.ts","webpack:///./src/layouts/hass-tabs-subpage.ts","webpack:///./src/components/ha-fab.ts","webpack:///./src/components/ha-icon-next.ts","webpack:///./src/util/toast-saved-success.ts","webpack:///./src/data/user.ts","webpack:///./src/panels/config/users/ha-config-user-picker.js","webpack:///./src/panels/config/users/ha-user-editor.ts","webpack:///./src/panels/config/users/ha-config-users.js"],"names":["__webpack_require__","d","__webpack_exports__","showAlertDialog","showConfirmationDialog","showPromptDialog","_common_dom_fire_event__WEBPACK_IMPORTED_MODULE_0__","loadGenericDialog","Promise","all","e","then","bind","showDialogHelper","element","dialogParams","extra","resolve","origCancel","cancel","origConfirm","confirm","fireEvent","dialogTag","dialogImport","Object","assign","prompt","out","confirmation","customElement","HassTabsSubpage","property","type","String","attribute","Boolean","reflect","changedProperties","_this2","this","_get","_getPrototypeOf","prototype","call","has","_activeTab","tabs","findIndex","tab","route","prefix","includes","path","_this3","html","_templateObject","hassio","_backTapped","narrow","_templateObject2","classMap","bottom-bar","map","page","index","component","core","isComponentLoaded","hass","exportOnly","showAdvanced","_templateObject3","active","_tabTapped","_templateObject4","icon","_templateObject5","translationKey","localize","name","ev","navigate","currentTarget","backPath","backCallback","history","back","css","_templateObject6","LitElement","MwcFab","customElements","get","_decorate","_initialize","_MwcFab","F","_MwcFab2","HaFab","_getPrototypeOf2","_this","_classCallCheck","_len","arguments","length","args","Array","_key","apply","concat","_assertThisInitialized","_inherits","kind","key","value","classes","mdc-fab--mini","mini","mdc-fab--exited","exited","mdc-fab--extended","extended","showLabel","label","ripple","disabled","showIconAtEnd","HaIconNext","_HaIcon","_possibleConstructorReturn","HaIcon","setTimeout","window","getComputedStyle","direction","define","showSaveSuccessToast","_toast__WEBPACK_IMPORTED_MODULE_0__","el","showToast","message","SYSTEM_GROUP_ID_ADMIN","SYSTEM_GROUP_ID_USER","fetchUsers","_ref","_asyncToGenerator","regeneratorRuntime","mark","_callee","wrap","_context","prev","next","abrupt","callWS","stop","_x","updateUser","_ref3","_callee3","userId","params","_context3","user_id","_x4","_x5","_x6","deleteUser","_ref4","_callee4","_context4","_x7","_x8","registeredDialog","HaUserPicker","EventsMixin","NavigateMixin","LocalizeMixin","PolymerElement","users","isWide","rtl","reflectToAttribute","computed","fire","dialogShowEvent","defaultValue","user","id","group_ids","computeRTL","configSections","persons","dialogClosedCallback","_dialogClosedCallback","GROUPS","_name","is_owner","_handleGroupChange","until","updateComplete","groupId","is_active","system_generated","_handlePromptRenameUser","_promptDeleteUser","ha_user_editor_templateObject","newName","t0","text","_callee2","_context2","blur","title","inputLabel","_handleRenameUser","selectEl","newGroup","code","_callee5","_ev","_context5","_deleteUser","haStyle","HaConfigUsers","ha_config_users_get","ha_config_users_getPrototypeOf","_loadData","addEventListener","_user","detail","_debouncer","Debouncer","debounce","timeOut","after","filter","u","a","b","_users","ha_config_users_templateObject","observer","_routeData"],"mappings":"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","file":"chunk.dd771322d5962d7f75f3.js","sourcesContent":["import { fireEvent } from \"../../common/dom/fire_event\";\n\ninterface BaseDialogParams {\n  confirmText?: string;\n  text?: string;\n  title?: string;\n}\n\nexport interface AlertDialogParams extends BaseDialogParams {\n  confirm?: () => void;\n}\n\nexport interface ConfirmationDialogParams extends BaseDialogParams {\n  dismissText?: string;\n  confirm?: () => void;\n  cancel?: () => void;\n}\n\nexport interface PromptDialogParams extends BaseDialogParams {\n  inputLabel?: string;\n  inputType?: string;\n  defaultValue?: string;\n  confirm?: (out?: string) => void;\n}\n\nexport interface DialogParams\n  extends ConfirmationDialogParams,\n    PromptDialogParams {\n  confirm?: (out?: string) => void;\n  confirmation?: boolean;\n  prompt?: boolean;\n}\n\nexport const loadGenericDialog = () =>\n  import(/* webpackChunkName: \"confirmation\" */ \"./dialog-box\");\n\nconst showDialogHelper = (\n  element: HTMLElement,\n  dialogParams: DialogParams,\n  extra?: {\n    confirmation?: DialogParams[\"confirmation\"];\n    prompt?: DialogParams[\"prompt\"];\n  }\n) =>\n  new Promise((resolve) => {\n    const origCancel = dialogParams.cancel;\n    const origConfirm = dialogParams.confirm;\n\n    fireEvent(element, \"show-dialog\", {\n      dialogTag: \"dialog-box\",\n      dialogImport: loadGenericDialog,\n      dialogParams: {\n        ...dialogParams,\n        ...extra,\n        cancel: () => {\n          resolve(extra?.prompt ? null : false);\n          if (origCancel) {\n            origCancel();\n          }\n        },\n        confirm: (out) => {\n          resolve(extra?.prompt ? out : true);\n          if (origConfirm) {\n            origConfirm(out);\n          }\n        },\n      },\n    });\n  });\n\nexport const showAlertDialog = (\n  element: HTMLElement,\n  dialogParams: AlertDialogParams\n) => showDialogHelper(element, dialogParams);\n\nexport const showConfirmationDialog = (\n  element: HTMLElement,\n  dialogParams: ConfirmationDialogParams\n) =>\n  showDialogHelper(element, dialogParams, { confirmation: true }) as Promise<\n    boolean\n  >;\n\nexport const showPromptDialog = (\n  element: HTMLElement,\n  dialogParams: PromptDialogParams\n) =>\n  showDialogHelper(element, dialogParams, { prompt: true }) as Promise<\n    null | string\n  >;\n","import {\n  LitElement,\n  property,\n  TemplateResult,\n  html,\n  customElement,\n  css,\n  CSSResult,\n  PropertyValues,\n} from \"lit-element\";\nimport \"../components/ha-menu-button\";\nimport \"../components/ha-paper-icon-button-arrow-prev\";\nimport { classMap } from \"lit-html/directives/class-map\";\nimport { Route, HomeAssistant } from \"../types\";\nimport { navigate } from \"../common/navigate\";\nimport \"@material/mwc-ripple\";\nimport { isComponentLoaded } from \"../common/config/is_component_loaded\";\n\nexport interface PageNavigation {\n  path: string;\n  translationKey?: string;\n  component?: string;\n  name?: string;\n  core?: boolean;\n  exportOnly?: boolean;\n  icon?: string;\n  info?: any;\n}\n\n@customElement(\"hass-tabs-subpage\")\nclass HassTabsSubpage extends LitElement {\n  @property() public hass!: HomeAssistant;\n  @property({ type: String, attribute: \"back-path\" }) public backPath?: string;\n  @property() public backCallback?: () => void;\n  @property({ type: Boolean }) public hassio = false;\n  @property({ type: Boolean }) public showAdvanced = false;\n  @property() public route!: Route;\n  @property() public tabs!: PageNavigation[];\n  @property({ type: Boolean, reflect: true }) public narrow = false;\n  @property() private _activeTab: number = -1;\n\n  protected updated(changedProperties: PropertyValues) {\n    super.updated(changedProperties);\n    if (changedProperties.has(\"route\")) {\n      this._activeTab = this.tabs.findIndex((tab) =>\n        this.route.prefix.includes(tab.path)\n      );\n    }\n  }\n\n  protected render(): TemplateResult {\n    return html`\n      <div class=\"toolbar\">\n        <ha-paper-icon-button-arrow-prev\n          aria-label=\"Back\"\n          .hassio=${this.hassio}\n          @click=${this._backTapped}\n        ></ha-paper-icon-button-arrow-prev>\n        ${this.narrow\n          ? html`\n              <div main-title><slot name=\"header\"></slot></div>\n            `\n          : \"\"}\n        <div id=\"tabbar\" class=${classMap({ \"bottom-bar\": this.narrow })}>\n          ${this.tabs.map((page, index) =>\n            (!page.component ||\n              page.core ||\n              isComponentLoaded(this.hass, page.component)) &&\n            (!page.exportOnly || this.showAdvanced)\n              ? html`\n                  <div\n                    class=\"tab ${classMap({\n                      active: index === this._activeTab,\n                    })}\"\n                    @click=${this._tabTapped}\n                    .path=${page.path}\n                  >\n                    ${this.narrow\n                      ? html`\n                          <ha-icon .icon=${page.icon}></ha-icon>\n                        `\n                      : \"\"}\n                    ${!this.narrow || index === this._activeTab\n                      ? html`\n                          <span class=\"name\"\n                            >${page.translationKey\n                              ? this.hass.localize(page.translationKey)\n                              : name}</span\n                          >\n                        `\n                      : \"\"}\n                    <mwc-ripple></mwc-ripple>\n                  </div>\n                `\n              : \"\"\n          )}\n        </div>\n\n        <div id=\"toolbar-icon\">\n          <slot name=\"toolbar-icon\"></slot>\n        </div>\n      </div>\n      <div class=\"content\">\n        <slot></slot>\n      </div>\n    `;\n  }\n\n  private _tabTapped(ev: MouseEvent): void {\n    navigate(this, (ev.currentTarget as any).path, true);\n  }\n\n  private _backTapped(): void {\n    if (this.backPath) {\n      navigate(this, this.backPath);\n      return;\n    }\n    if (this.backCallback) {\n      this.backCallback();\n      return;\n    }\n    history.back();\n  }\n\n  static get styles(): CSSResult {\n    return css`\n      :host {\n        display: block;\n        height: 100%;\n        background-color: var(--primary-background-color);\n      }\n\n      .toolbar {\n        display: flex;\n        align-items: center;\n        font-size: 20px;\n        height: 65px;\n        background-color: var(--sidebar-background-color);\n        font-weight: 400;\n        color: var(--sidebar-text-color);\n        border-bottom: 1px solid var(--divider-color);\n        padding: 0 16px;\n        box-sizing: border-box;\n      }\n\n      #tabbar {\n        display: flex;\n        font-size: 14px;\n      }\n\n      #tabbar.bottom-bar {\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        padding: 0 16px;\n        box-sizing: border-box;\n        background-color: var(--sidebar-background-color);\n        border-top: 1px solid var(--divider-color);\n        justify-content: space-between;\n        z-index: 1;\n        font-size: 12px;\n        width: 100%;\n      }\n\n      #tabbar:not(.bottom-bar) {\n        margin: auto;\n        left: 50%;\n        position: absolute;\n        transform: translate(-50%, 0);\n      }\n\n      .tab {\n        padding: 0 32px;\n        display: flex;\n        flex-direction: column;\n        text-align: center;\n        align-items: center;\n        justify-content: center;\n        height: 64px;\n        cursor: pointer;\n      }\n\n      .name {\n        white-space: nowrap;\n      }\n\n      .tab.active {\n        color: var(--primary-color);\n      }\n\n      #tabbar:not(.bottom-bar) .tab.active {\n        border-bottom: 2px solid var(--primary-color);\n      }\n\n      .bottom-bar .tab {\n        padding: 0 16px;\n        width: 20%;\n        min-width: 0;\n      }\n\n      ha-menu-button,\n      ha-paper-icon-button-arrow-prev,\n      ::slotted([slot=\"toolbar-icon\"]) {\n        pointer-events: auto;\n        color: var(--sidebar-icon-color);\n      }\n\n      [main-title] {\n        margin: 0 0 0 24px;\n        line-height: 20px;\n        flex-grow: 1;\n      }\n\n      .content {\n        position: relative;\n        width: 100%;\n        height: calc(100% - 65px);\n        overflow-y: auto;\n        overflow: auto;\n        -webkit-overflow-scrolling: touch;\n      }\n\n      #toolbar-icon {\n        position: absolute;\n        right: 16px;\n      }\n\n      :host([narrow]) .content {\n        height: calc(100% - 128px);\n      }\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"hass-tabs-subpage\": HassTabsSubpage;\n  }\n}\n","import { classMap } from \"lit-html/directives/class-map\";\nimport { html, customElement } from \"lit-element\";\nimport { ripple } from \"@material/mwc-ripple/ripple-directive.js\";\n\nimport \"@material/mwc-fab\";\nimport { Constructor } from \"../types\";\n// tslint:disable-next-line\nimport { Fab } from \"@material/mwc-fab\";\n// tslint:disable-next-line\nconst MwcFab = customElements.get(\"mwc-fab\") as Constructor<Fab>;\n\n@customElement(\"ha-fab\")\nexport class HaFab extends MwcFab {\n  // We override the render method because we don't have an icon font and mwc-fab doesn't support our svg-icon sets.\n  // Based on version mwc-fab 0.8\n  protected render() {\n    const classes = {\n      \"mdc-fab--mini\": this.mini,\n      \"mdc-fab--exited\": this.exited,\n      \"mdc-fab--extended\": this.extended,\n    };\n    const showLabel = this.label !== \"\" && this.extended;\n    return html`\n      <button\n        .ripple=\"${ripple()}\"\n        class=\"mdc-fab ${classMap(classes)}\"\n        ?disabled=\"${this.disabled}\"\n        aria-label=\"${this.label || this.icon}\"\n      >\n        ${showLabel && this.showIconAtEnd ? this.label : \"\"}\n        ${this.icon\n          ? html`\n              <ha-icon .icon=${this.icon}></ha-icon>\n            `\n          : \"\"}\n        ${showLabel && !this.showIconAtEnd ? this.label : \"\"}\n      </button>\n    `;\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-fab\": HaFab;\n  }\n}\n","import \"@polymer/iron-icon/iron-icon\";\n// Not duplicate, this is for typing.\n// tslint:disable-next-line\nimport { HaIcon } from \"./ha-icon\";\n\nexport class HaIconNext extends HaIcon {\n  public connectedCallback() {\n    super.connectedCallback();\n\n    // wait to check for direction since otherwise direction is wrong even though top level is RTL\n    setTimeout(() => {\n      this.icon =\n        window.getComputedStyle(this).direction === \"ltr\"\n          ? \"hass:chevron-right\"\n          : \"hass:chevron-left\";\n    }, 100);\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-icon-next\": HaIconNext;\n  }\n}\n\ncustomElements.define(\"ha-icon-next\", HaIconNext);\n","import { showToast } from \"./toast\";\nimport { HomeAssistant } from \"../types\";\n\nexport const showSaveSuccessToast = (el: HTMLElement, hass: HomeAssistant) =>\n  showToast(el, {\n    message: hass!.localize(\"ui.common.successfully_saved\"),\n  });\n","import { HomeAssistant } from \"../types\";\nimport { Credential } from \"./auth\";\n\nexport const SYSTEM_GROUP_ID_ADMIN = \"system-admin\";\nexport const SYSTEM_GROUP_ID_USER = \"system-users\";\nexport const SYSTEM_GROUP_ID_READ_ONLY = \"system-read-only\";\n\nexport interface User {\n  id: string;\n  name: string;\n  is_owner: boolean;\n  is_active: boolean;\n  system_generated: boolean;\n  group_ids: string[];\n  credentials: Credential[];\n}\n\ninterface UpdateUserParams {\n  name?: User[\"name\"];\n  group_ids?: User[\"group_ids\"];\n}\n\nexport const fetchUsers = async (hass: HomeAssistant) =>\n  hass.callWS<User[]>({\n    type: \"config/auth/list\",\n  });\n\nexport const createUser = async (hass: HomeAssistant, name: string) =>\n  hass.callWS<{ user: User }>({\n    type: \"config/auth/create\",\n    name,\n  });\n\nexport const updateUser = async (\n  hass: HomeAssistant,\n  userId: string,\n  params: UpdateUserParams\n) =>\n  hass.callWS<{ user: User }>({\n    ...params,\n    type: \"config/auth/update\",\n    user_id: userId,\n  });\n\nexport const deleteUser = async (hass: HomeAssistant, userId: string) =>\n  hass.callWS<void>({\n    type: \"config/auth/delete\",\n    user_id: userId,\n  });\n","import \"@polymer/paper-item/paper-item\";\nimport \"@polymer/paper-item/paper-item-body\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport \"../../../layouts/hass-tabs-subpage\";\nimport \"../../../components/ha-icon-next\";\nimport \"../../../components/ha-card\";\nimport \"../../../components/ha-fab\";\n\nimport LocalizeMixin from \"../../../mixins/localize-mixin\";\nimport NavigateMixin from \"../../../mixins/navigate-mixin\";\nimport { EventsMixin } from \"../../../mixins/events-mixin\";\n\nimport { computeRTL } from \"../../../common/util/compute_rtl\";\nimport { configSections } from \"../ha-panel-config\";\n\nlet registeredDialog = false;\n\n/*\n * @appliesMixin LocalizeMixin\n * @appliesMixin NavigateMixin\n * @appliesMixin EventsMixin\n */\nclass HaUserPicker extends EventsMixin(\n  NavigateMixin(LocalizeMixin(PolymerElement))\n) {\n  static get template() {\n    return html`\n      <style>\n        ha-fab {\n          position: fixed;\n          bottom: 16px;\n          right: 16px;\n          z-index: 1;\n        }\n        ha-fab[is-wide] {\n          bottom: 24px;\n          right: 24px;\n        }\n        ha-fab[rtl] {\n          right: auto;\n          left: 16px;\n        }\n        ha-fab[narrow] {\n          bottom: 84px;\n        }\n        ha-fab[rtl][is-wide] {\n          bottom: 24px;\n          right: auto;\n          left: 24px;\n        }\n\n        ha-card {\n          max-width: 600px;\n          margin: 16px auto;\n          overflow: hidden;\n        }\n        a {\n          text-decoration: none;\n          color: var(--primary-text-color);\n        }\n      </style>\n\n      <hass-tabs-subpage\n        hass=\"[[hass]]\"\n        narrow=\"[[narrow]]\"\n        route=\"[[route]]\"\n        back-path=\"/config\"\n        tabs=\"[[_computeTabs()]]\"\n      >\n        <ha-card>\n          <template is=\"dom-repeat\" items=\"[[users]]\" as=\"user\">\n            <a href=\"[[_computeUrl(user)]]\">\n              <paper-item>\n                <paper-item-body two-line>\n                  <div>[[_withDefault(user.name, 'Unnamed User')]]</div>\n                  <div secondary=\"\">\n                    [[_computeGroup(localize, user)]]\n                    <template is=\"dom-if\" if=\"[[user.system_generated]]\">\n                      -\n                      [[localize('ui.panel.config.users.picker.system_generated')]]\n                    </template>\n                  </div>\n                </paper-item-body>\n                <ha-icon-next></ha-icon-next>\n              </paper-item>\n            </a>\n          </template>\n        </ha-card>\n\n        <ha-fab\n          is-wide$=\"[[isWide]]\"\n          narrow$=\"[[narrow]]\"\n          icon=\"hass:plus\"\n          title=\"[[localize('ui.panel.config.users.picker.add_user')]]\"\n          on-click=\"_addUser\"\n          rtl$=\"[[rtl]]\"\n        ></ha-fab>\n      </hass-tabs-subpage>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      users: Array,\n      isWide: Boolean,\n      narrow: Boolean,\n      route: Object,\n      rtl: {\n        type: Boolean,\n        reflectToAttribute: true,\n        computed: \"_computeRTL(hass)\",\n      },\n    };\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    if (!registeredDialog) {\n      registeredDialog = true;\n      this.fire(\"register-dialog\", {\n        dialogShowEvent: \"show-add-user\",\n        dialogTag: \"ha-dialog-add-user\",\n        dialogImport: () =>\n          import(\n            /* webpackChunkName: \"ha-dialog-add-user\" */ \"./ha-dialog-add-user\"\n          ),\n      });\n    }\n  }\n\n  _withDefault(value, defaultValue) {\n    return value || defaultValue;\n  }\n\n  _computeUrl(user) {\n    return `/config/users/${user.id}`;\n  }\n\n  _computeGroup(localize, user) {\n    return localize(`groups.${user.group_ids[0]}`);\n  }\n\n  _computeRTL(hass) {\n    return computeRTL(hass);\n  }\n\n  _computeTabs() {\n    return configSections.persons;\n  }\n\n  _addUser() {\n    this.fire(\"show-add-user\", {\n      hass: this.hass,\n      dialogClosedCallback: async ({ userId }) => {\n        this.fire(\"reload-users\");\n        if (userId) this.navigate(`/config/users/${userId}`);\n      },\n    });\n  }\n}\n\ncustomElements.define(\"ha-config-user-picker\", HaUserPicker);\n","import {\n  LitElement,\n  TemplateResult,\n  html,\n  customElement,\n  CSSResultArray,\n  css,\n  property,\n} from \"lit-element\";\nimport { until } from \"lit-html/directives/until\";\nimport \"@material/mwc-button\";\n\nimport \"../../../layouts/hass-tabs-subpage\";\nimport { haStyle } from \"../../../resources/styles\";\nimport \"../../../components/ha-card\";\nimport { HomeAssistant, Route } from \"../../../types\";\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport { navigate } from \"../../../common/navigate\";\nimport {\n  User,\n  deleteUser,\n  updateUser,\n  SYSTEM_GROUP_ID_USER,\n  SYSTEM_GROUP_ID_ADMIN,\n} from \"../../../data/user\";\nimport { showSaveSuccessToast } from \"../../../util/toast-saved-success\";\nimport {\n  showAlertDialog,\n  showConfirmationDialog,\n  showPromptDialog,\n} from \"../../../dialogs/generic/show-dialog-box\";\nimport { configSections } from \"../ha-panel-config\";\n\ndeclare global {\n  interface HASSDomEvents {\n    \"reload-users\": undefined;\n  }\n}\n\nconst GROUPS = [SYSTEM_GROUP_ID_USER, SYSTEM_GROUP_ID_ADMIN];\n\n@customElement(\"ha-user-editor\")\nclass HaUserEditor extends LitElement {\n  @property() public hass?: HomeAssistant;\n  @property() public user?: User;\n  @property() public narrow?: boolean;\n  @property() public route!: Route;\n\n  protected render(): TemplateResult {\n    const hass = this.hass;\n    const user = this.user;\n    if (!hass || !user) {\n      return html``;\n    }\n\n    return html`\n      <hass-tabs-subpage\n        .hass=${this.hass}\n        .narrow=${this.narrow}\n        .route=${this.route}\n        .tabs=${configSections.persons}\n      >\n        <ha-card .header=${this._name}>\n          <table class=\"card-content\">\n            <tr>\n              <td>${hass.localize(\"ui.panel.config.users.editor.id\")}</td>\n              <td>${user.id}</td>\n            </tr>\n            <tr>\n              <td>${hass.localize(\"ui.panel.config.users.editor.owner\")}</td>\n              <td>${user.is_owner}</td>\n            </tr>\n            <tr>\n              <td>${hass.localize(\"ui.panel.config.users.editor.group\")}</td>\n              <td>\n                <select\n                  @change=${this._handleGroupChange}\n                  .value=${until(\n                    this.updateComplete.then(() => user.group_ids[0])\n                  )}\n                >\n                  ${GROUPS.map(\n                    (groupId) => html`\n                      <option value=${groupId}>\n                        ${hass.localize(`groups.${groupId}`)}\n                      </option>\n                    `\n                  )}\n                </select>\n              </td>\n            </tr>\n            ${user.group_ids[0] === SYSTEM_GROUP_ID_USER\n              ? html`\n                  <tr>\n                    <td colspan=\"2\" class=\"user-experiment\">\n                      The users group is a work in progress. The user will be\n                      unable to administer the instance via the UI. We're still\n                      auditing all management API endpoints to ensure that they\n                      correctly limit access to administrators.\n                    </td>\n                  </tr>\n                `\n              : \"\"}\n\n            <tr>\n              <td>${hass.localize(\"ui.panel.config.users.editor.active\")}</td>\n              <td>${user.is_active}</td>\n            </tr>\n            <tr>\n              <td>\n                ${hass.localize(\n                  \"ui.panel.config.users.editor.system_generated\"\n                )}\n              </td>\n              <td>${user.system_generated}</td>\n            </tr>\n          </table>\n\n          <div class=\"card-actions\">\n            <mwc-button @click=${this._handlePromptRenameUser}>\n              ${hass.localize(\"ui.panel.config.users.editor.rename_user\")}\n            </mwc-button>\n            <mwc-button\n              class=\"warning\"\n              @click=${this._promptDeleteUser}\n              .disabled=${user.system_generated}\n            >\n              ${hass.localize(\"ui.panel.config.users.editor.delete_user\")}\n            </mwc-button>\n            ${user.system_generated\n              ? html`\n                  ${hass.localize(\n                    \"ui.panel.config.users.editor.system_generated_users_not_removable\"\n                  )}\n                `\n              : \"\"}\n          </div>\n        </ha-card>\n      </hass-tabs-subpage>\n    `;\n  }\n\n  private get _name() {\n    return (\n      this.user &&\n      (this.user.name ||\n        this.hass!.localize(\"ui.panel.config.users.editor.unnamed_user\"))\n    );\n  }\n\n  private async _handleRenameUser(newName?: string) {\n    if (newName === null || newName === this.user!.name) {\n      return;\n    }\n\n    try {\n      await updateUser(this.hass!, this.user!.id, {\n        name: newName,\n      });\n      fireEvent(this, \"reload-users\");\n    } catch (err) {\n      showAlertDialog(this, {\n        text: `${this.hass!.localize(\n          \"ui.panel.config.users.editor.user_rename_failed\"\n        )} ${err.message}`,\n      });\n    }\n  }\n\n  private async _handlePromptRenameUser(ev): Promise<void> {\n    ev.currentTarget.blur();\n    showPromptDialog(this, {\n      title: this.hass!.localize(\"ui.panel.config.users.editor.enter_new_name\"),\n      defaultValue: this.user!.name,\n      inputLabel: this.hass!.localize(\"ui.panel.config.users.add_user.name\"),\n      confirm: (text) => this._handleRenameUser(text),\n    });\n  }\n\n  private async _handleGroupChange(ev): Promise<void> {\n    const selectEl = ev.currentTarget as HTMLSelectElement;\n    const newGroup = selectEl.value;\n    try {\n      await updateUser(this.hass!, this.user!.id, {\n        group_ids: [newGroup],\n      });\n      showSaveSuccessToast(this, this.hass!);\n      fireEvent(this, \"reload-users\");\n    } catch (err) {\n      showAlertDialog(this, {\n        text: `${this.hass!.localize(\n          \"ui.panel.config.users.editor.group_update_failed\"\n        )} ${err.message}`,\n      });\n      selectEl.value = this.user!.group_ids[0];\n    }\n  }\n\n  private async _deleteUser() {\n    try {\n      await deleteUser(this.hass!, this.user!.id);\n    } catch (err) {\n      showAlertDialog(this, {\n        text: err.code,\n      });\n      return;\n    }\n    fireEvent(this, \"reload-users\");\n    navigate(this, \"/config/users\");\n  }\n\n  private async _promptDeleteUser(_ev): Promise<void> {\n    showConfirmationDialog(this, {\n      text: this.hass!.localize(\n        \"ui.panel.config.users.editor.confirm_user_deletion\",\n        \"name\",\n        this._name\n      ),\n      confirm: () => this._deleteUser(),\n    });\n  }\n\n  static get styles(): CSSResultArray {\n    return [\n      haStyle,\n      css`\n        .card-actions {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n        }\n        ha-card {\n          max-width: 600px;\n          margin: 16px auto 16px;\n        }\n        hass-subpage ha-card:first-of-type {\n          direction: ltr;\n        }\n        table {\n          width: 100%;\n        }\n        td {\n          vertical-align: top;\n        }\n        .user-experiment {\n          padding: 8px 0;\n        }\n      `,\n    ];\n  }\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-user-editor\": HaUserEditor;\n  }\n}\n","import \"@polymer/app-route/app-route\";\nimport { timeOut } from \"@polymer/polymer/lib/utils/async\";\nimport { Debouncer } from \"@polymer/polymer/lib/utils/debounce\";\nimport { html } from \"@polymer/polymer/lib/utils/html-tag\";\nimport { PolymerElement } from \"@polymer/polymer/polymer-element\";\n\nimport NavigateMixin from \"../../../mixins/navigate-mixin\";\n\nimport \"./ha-config-user-picker\";\nimport \"./ha-user-editor\";\nimport { fireEvent } from \"../../../common/dom/fire_event\";\nimport { fetchUsers } from \"../../../data/user\";\n\n/*\n * @appliesMixin NavigateMixin\n */\nclass HaConfigUsers extends NavigateMixin(PolymerElement) {\n  static get template() {\n    return html`\n      <app-route\n        route=\"[[route]]\"\n        pattern=\"/:user\"\n        data=\"{{_routeData}}\"\n      ></app-route>\n\n      <template is=\"dom-if\" if='[[_equals(_routeData.user, \"picker\")]]'>\n        <ha-config-user-picker\n          hass=\"[[hass]]\"\n          users=\"[[_users]]\"\n          is-wide=\"[[isWide]]\"\n          narrow=\"[[narrow]]\"\n          route=\"[[route]]\"\n        ></ha-config-user-picker>\n      </template>\n      <template\n        is=\"dom-if\"\n        if='[[!_equals(_routeData.user, \"picker\")]]'\n        restamp\n      >\n        <ha-user-editor\n          hass=\"[[hass]]\"\n          user=\"[[_computeUser(_users, _routeData.user)]]\"\n          narrow=\"[[narrow]]\"\n          route=\"[[route]]\"\n        ></ha-user-editor>\n      </template>\n    `;\n  }\n\n  static get properties() {\n    return {\n      hass: Object,\n      isWide: Boolean,\n      narrow: Boolean,\n      route: {\n        type: Object,\n        observer: \"_checkRoute\",\n      },\n      _routeData: Object,\n      _user: {\n        type: Object,\n        value: null,\n      },\n      _users: {\n        type: Array,\n        value: null,\n      },\n    };\n  }\n\n  ready() {\n    super.ready();\n    this._loadData();\n    this.addEventListener(\"reload-users\", () => this._loadData());\n  }\n\n  _handlePickUser(ev) {\n    this._user = ev.detail.user;\n  }\n\n  _checkRoute(route) {\n    // prevent list getting under toolbar\n    fireEvent(this, \"iron-resize\");\n\n    this._debouncer = Debouncer.debounce(\n      this._debouncer,\n      timeOut.after(0),\n      () => {\n        if (route.path === \"\") {\n          this.navigate(`${route.prefix}/picker`, true);\n        }\n      }\n    );\n  }\n\n  _computeUser(users, userId) {\n    return users && users.filter((u) => u.id === userId)[0];\n  }\n\n  _equals(a, b) {\n    return a === b;\n  }\n\n  async _loadData() {\n    this._users = await fetchUsers(this.hass);\n  }\n}\n\ncustomElements.define(\"ha-config-users\", HaConfigUsers);\n"],"sourceRoot":""}