<!doctype html><html>
 <head>
  <link href="http://example.com/foo" rel="canonical">
 <body>
  <h1>Foo</h1>
  <p>"code1": <code>code1</code></p>
  <p>"code2": This is <code>code2</code>.</p>
  <p>"code spaces": This one has <code>code spaces</code>.</p>
  <p>"code link": This one is <a href="#">in a <code>code link</code></a>.</p>
  <p>"not code": Here’s some `literal backticks`</p>
  <p>"multi-backtick code": This code is <code>delimited ``` by two `s</code>, so it can include single or triple backticks.</p>
  <p>"code block"</p>
<pre>This is a code block.
</pre>
  <p>"tilda code block"</p>
<pre>this code block has tildas,
&lt;code data-opaque bs-autolink-syntax='```
and isn&amp;apos;t closed by backticks
```'>and isn't closed by backticks&lt;/code>
TODO: move fixText() into the markdown handler, so it doesn’t operate on raw lines;
TODO: right now it’ll make replacements in scripts, which is obviously bad :(
</pre>
  <p>foo</p>
  <p>"long code block"</p>
<pre>this code block starts with 4 backticks
```
so it’s not closed by the 3 backticks above
but it’s closed with way more than 4 backticks
</pre>
  <p>some final non-code text to make sure things get closed correctly</p>